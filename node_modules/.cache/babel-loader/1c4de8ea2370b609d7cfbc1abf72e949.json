{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/bilal/Downloads/final1/final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/bilal/Downloads/final1/final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex-direction: column;\\n\\n  \",\":first-child {\\n    padding-left: 0;\\n  }\\n\\n  \",\":last-child {\\n    padding-right: 0;\\n  }\\n\\n  \",\" {\\n    flex-direction: row;\\n  }\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  padding: 0 4px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useEffect,useState}from'react';import styled from'styled-components';import{Box,Button,Flex,Input,Text}from'waltor-uikit';import{useUserSlippageTolerance}from'state/user/hooks';import QuestionHelper from'../QuestionHelper';var MAX_SLIPPAGE=5000;var RISKY_SLIPPAGE_LOW=50;var RISKY_SLIPPAGE_HIGH=500;var Option=styled.div(_templateObject());var Options=styled.div(_templateObject2(),Option,Option,function(_ref){var theme=_ref.theme;return theme.mediaQueries.sm;});var predefinedValues=[{label:'0.1%',value:0.1},{label:'0.5%',value:0.5},{label:'1%',value:1}];var SlippageToleranceSettings=function SlippageToleranceSettings(_ref2){var translateString=_ref2.translateString;var _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,2),userSlippageTolerance=_useUserSlippageToler2[0],setUserslippageTolerance=_useUserSlippageToler2[1];var _useState=useState(userSlippageTolerance/100),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleChange=function handleChange(evt){var inputValue=evt.target.value;setValue(parseFloat(inputValue));};// Updates local storage if value is valid\nuseEffect(function(){try{var rawValue=value*100;if(!Number.isNaN(rawValue)&&rawValue>0&&rawValue<MAX_SLIPPAGE){setUserslippageTolerance(rawValue);setError(null);}else{setError(translateString(1144,'Enter a valid slippage percentage'));}}catch(_unused){setError(translateString(1144,'Enter a valid slippage percentage'));}},[value,setError,setUserslippageTolerance,translateString]);// Notify user if slippage is risky\nuseEffect(function(){if(userSlippageTolerance<RISKY_SLIPPAGE_LOW){setError(translateString(1146,'Your transaction may fail'));}else if(userSlippageTolerance>RISKY_SLIPPAGE_HIGH){setError(translateString(1148,'Your transaction may be frontrun'));}},[userSlippageTolerance,setError,translateString]);return/*#__PURE__*/_jsxs(Box,{mb:\"16px\",children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",mb:\"8px\",children:[/*#__PURE__*/_jsx(Text,{bold:true,children:translateString(88,'Slippage tolerance')}),/*#__PURE__*/_jsx(QuestionHelper,{text:translateString(186,'Your transaction will revert if the price changes unfavorably by more than this percentage.')})]}),/*#__PURE__*/_jsxs(Options,{children:[/*#__PURE__*/_jsx(Flex,{mb:['8px','8px',0],mr:[0,0,'8px'],children:predefinedValues.map(function(_ref3){var label=_ref3.label,predefinedValue=_ref3.value;var handleClick=function handleClick(){return setValue(predefinedValue);};return/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Button,{variant:value===predefinedValue?'primary':'tertiary',onClick:handleClick,children:label})},predefinedValue);})}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Input,{type:\"number\",scale:\"lg\",step:0.1,min:0.1,placeholder:\"5%\",value:value,onChange:handleChange,isWarning:error!==null})}),/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Text,{fontSize:\"18px\",children:\"%\"})})]})]}),error&&/*#__PURE__*/_jsx(Text,{mt:\"8px\",color:\"failure\",children:error})]});};export default SlippageToleranceSettings;","map":{"version":3,"sources":["/home/bilal/Downloads/final1/final/src/components/PageHeader/SlippageToleranceSetting.tsx"],"names":["React","useEffect","useState","styled","Box","Button","Flex","Input","Text","useUserSlippageTolerance","QuestionHelper","MAX_SLIPPAGE","RISKY_SLIPPAGE_LOW","RISKY_SLIPPAGE_HIGH","Option","div","Options","theme","mediaQueries","sm","predefinedValues","label","value","SlippageToleranceSettings","translateString","userSlippageTolerance","setUserslippageTolerance","setValue","error","setError","handleChange","evt","inputValue","target","parseFloat","rawValue","Number","isNaN","map","predefinedValue","handleClick"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { Box, Button, Flex, Input, Text } from 'waltor-uikit'\nimport { useUserSlippageTolerance } from 'state/user/hooks'\nimport QuestionHelper from '../QuestionHelper'\n\nconst MAX_SLIPPAGE = 5000\nconst RISKY_SLIPPAGE_LOW = 50\nconst RISKY_SLIPPAGE_HIGH = 500\n\nconst Option = styled.div`\n  padding: 0 4px;\n`\n\nconst Options = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n\n  ${Option}:first-child {\n    padding-left: 0;\n  }\n\n  ${Option}:last-child {\n    padding-right: 0;\n  }\n\n  ${({ theme }) => theme.mediaQueries.sm} {\n    flex-direction: row;\n  }\n`\n\nconst predefinedValues = [\n  { label: '0.1%', value: 0.1 },\n  { label: '0.5%', value: 0.5 },\n  { label: '1%', value: 1 },\n]\n\ntype SlippageToleranceSettingsModalProps = {\n  translateString: (translationId: number, fallback: string) => string\n}\n\nconst SlippageToleranceSettings = ({ translateString }: SlippageToleranceSettingsModalProps) => {\n  const [userSlippageTolerance, setUserslippageTolerance] = useUserSlippageTolerance()\n  const [value, setValue] = useState(userSlippageTolerance / 100)\n  const [error, setError] = useState<string | null>(null)\n  const handleChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const { value: inputValue } = evt.target\n    setValue(parseFloat(inputValue))\n  }\n\n  // Updates local storage if value is valid\n  useEffect(() => {\n    try {\n      const rawValue = value * 100\n      if (!Number.isNaN(rawValue) && rawValue > 0 && rawValue < MAX_SLIPPAGE) {\n        setUserslippageTolerance(rawValue)\n        setError(null)\n      } else {\n        setError(translateString(1144, 'Enter a valid slippage percentage'))\n      }\n    } catch {\n      setError(translateString(1144, 'Enter a valid slippage percentage'))\n    }\n  }, [value, setError, setUserslippageTolerance, translateString])\n\n  // Notify user if slippage is risky\n  useEffect(() => {\n    if (userSlippageTolerance < RISKY_SLIPPAGE_LOW) {\n      setError(translateString(1146, 'Your transaction may fail'))\n    } else if (userSlippageTolerance > RISKY_SLIPPAGE_HIGH) {\n      setError(translateString(1148, 'Your transaction may be frontrun'))\n    }\n  }, [userSlippageTolerance, setError, translateString])\n\n  return (\n    <Box mb=\"16px\">\n      <Flex alignItems=\"center\" mb=\"8px\">\n        <Text bold>{translateString(88, 'Slippage tolerance')}</Text>\n        <QuestionHelper\n          text={translateString(\n            186,\n            'Your transaction will revert if the price changes unfavorably by more than this percentage.'\n          )}\n        />\n      </Flex>\n      <Options>\n        <Flex mb={['8px', '8px', 0]} mr={[0, 0, '8px']}>\n          {predefinedValues.map(({ label, value: predefinedValue }) => {\n            const handleClick = () => setValue(predefinedValue)\n\n            return (\n              <Option key={predefinedValue}>\n                <Button variant={value === predefinedValue ? 'primary' : 'tertiary'} onClick={handleClick}>\n                  {label}\n                </Button>\n              </Option>\n            )\n          })}\n        </Flex>\n        <Flex alignItems=\"center\">\n          <Option>\n            <Input\n              type=\"number\"\n              scale=\"lg\"\n              step={0.1}\n              min={0.1}\n              placeholder=\"5%\"\n              value={value}\n              onChange={handleChange}\n              isWarning={error !== null}\n            />\n          </Option>\n          <Option>\n            <Text fontSize=\"18px\">%</Text>\n          </Option>\n        </Flex>\n      </Options>\n      {error && (\n        <Text mt=\"8px\" color=\"failure\">\n          {error}\n        </Text>\n      )}\n    </Box>\n  )\n}\n\nexport default SlippageToleranceSettings\n"]},"metadata":{},"sourceType":"module"}