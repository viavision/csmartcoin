{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"C:/Program Files (x86)/Ampps/www/swap/new/PanCakeSwapFork-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:/Program Files (x86)/Ampps/www/swap/new/PanCakeSwapFork-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Program Files (x86)/Ampps/www/swap/new/PanCakeSwapFork-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Program Files (x86)/Ampps/www/swap/new/PanCakeSwapFork-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: inline;\\n  color: \",\";\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import{JSBI,Token}from'@pancakeswap-libs/sdk';import React,{useCallback,useContext,useEffect,useMemo,useState,useRef}from'react';import{ArrowDown}from'react-feather';import{CardBody,ArrowDownIcon,Button,IconButton,Text,useModal,Link,Flex}from'waltor-uikit';import styled,{ThemeContext}from'styled-components';import AddressInputPanel from'components/AddressInputPanel';import Card,{GreyCard}from'components/Card';import{AutoColumn}from'components/Column';import ConfirmSwapModal from'components/swap/ConfirmSwapModal';import CurrencyInputPanel from'components/CurrencyInputPanel';import CardNav from'components/CardNav';import{AutoRow,RowBetween}from'components/Row';import AdvancedSwapDetailsDropdown from'components/swap/AdvancedSwapDetailsDropdown';import confirmPriceImpactWithoutFee from'components/swap/confirmPriceImpactWithoutFee';import{ArrowWrapper,BottomGrouping,SwapCallbackError,Wrapper}from'components/swap/styleds';import TradePrice from'components/swap/TradePrice';import TokenWarningModal from'components/TokenWarningModal';import SyrupWarningModal from'components/SyrupWarningModal';import SafeMoonWarningModal from'components/SafeMoonWarningModal';import ProgressSteps from'components/ProgressSteps';import Container from'components/Container';import{INITIAL_ALLOWED_SLIPPAGE}from'constants/index';import{useActiveWeb3React}from'hooks';import{useCurrency}from'hooks/Tokens';import{ApprovalState,useApproveCallbackFromTrade}from'hooks/useApproveCallback';import{useSwapCallback}from'hooks/useSwapCallback';import useWrapCallback,{WrapType}from'hooks/useWrapCallback';import{Field}from'state/swap/actions';import{useDefaultsFromURLSearch,useDerivedSwapInfo,useSwapActionHandlers,useSwapState}from'state/swap/hooks';import{useExpertModeManager,useUserDeadline,useUserSlippageTolerance}from'state/user/hooks';import{LinkStyledButton}from'components/Shared';import{maxAmountSpend}from'utils/maxAmountSpend';import{computeTradePriceBreakdown,warningSeverity}from'utils/prices';import Loader from'components/Loader';import useI18n from'hooks/useI18n';import PageHeader from'components/PageHeader';import ConnectWalletButton from'components/ConnectWalletButton';import V2ExchangeRedirectModal from'components/V2ExchangeRedirectModal';import AppBody from'../AppBody';var StyledLink=styled(Link)(_templateObject(),function(_ref){var theme=_ref.theme;return theme.colors.failure;});var Swap=function Swap(){var _ref4,_ref5,_parsedAmounts$indepe,_parsedAmounts$indepe2,_parsedAmounts$depend,_parsedAmounts$depend2,_formattedAmounts,_parsedAmounts$indepe3,_parsedAmounts$Field$,_currencies$Field$INP2;var loadedUrlParams=useDefaultsFromURLSearch();var TranslateString=useI18n();var _useState=useState(5),_useState2=_slicedToArray(_useState,2),modalCountdownSecondsRemaining=_useState2[0],setModalCountdownSecondsRemaining=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),disableSwap=_useState4[0],setDisableSwap=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hasPoppedModal=_useState6[0],setHasPoppedModal=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),interruptRedirectCountdown=_useState8[0],setInterruptRedirectCountdown=_useState8[1];var _useModal=useModal(/*#__PURE__*/_jsx(V2ExchangeRedirectModal,{handleCloseModal:function handleCloseModal(){return setInterruptRedirectCountdown(true);}})),_useModal2=_slicedToArray(_useModal,1),onPresentV2ExchangeRedirectModal=_useModal2[0];var onPresentV2ExchangeRedirectModalRef=useRef(onPresentV2ExchangeRedirectModal);// token warning stuff\nvar _ref2=[useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.inputCurrencyId),useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.outputCurrencyId)],loadedInputCurrency=_ref2[0],loadedOutputCurrency=_ref2[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),dismissTokenWarning=_useState10[0],setDismissTokenWarning=_useState10[1];var _useState11=useState({selectedToken:null,purchaseType:null}),_useState12=_slicedToArray(_useState11,2),transactionWarning=_useState12[0],setTransactionWarning=_useState12[1];var urlLoadedTokens=useMemo(function(){var _filter,_ref3;return(_filter=(_ref3=[loadedInputCurrency,loadedOutputCurrency])===null||_ref3===void 0?void 0:_ref3.filter(function(c){return c instanceof Token;}))!==null&&_filter!==void 0?_filter:[];},[loadedInputCurrency,loadedOutputCurrency]);var handleConfirmTokenWarning=useCallback(function(){setDismissTokenWarning(true);},[]);var handleConfirmWarning=function handleConfirmWarning(){setTransactionWarning({selectedToken:null,purchaseType:null});};var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;var theme=useContext(ThemeContext);var _useExpertModeManager=useExpertModeManager(),_useExpertModeManager2=_slicedToArray(_useExpertModeManager,1),isExpertMode=_useExpertModeManager2[0];// get custom setting values for user\nvar _useUserDeadline=useUserDeadline(),_useUserDeadline2=_slicedToArray(_useUserDeadline,1),deadline=_useUserDeadline2[0];var _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,1),allowedSlippage=_useUserSlippageToler2[0];// swap state\nvar _useSwapState=useSwapState(),independentField=_useSwapState.independentField,typedValue=_useSwapState.typedValue,recipient=_useSwapState.recipient;var _useDerivedSwapInfo=useDerivedSwapInfo(),v2Trade=_useDerivedSwapInfo.v2Trade,currencyBalances=_useDerivedSwapInfo.currencyBalances,parsedAmount=_useDerivedSwapInfo.parsedAmount,currencies=_useDerivedSwapInfo.currencies,swapInputError=_useDerivedSwapInfo.inputError;var _useWrapCallback=useWrapCallback(currencies[Field.INPUT],currencies[Field.OUTPUT],typedValue),wrapType=_useWrapCallback.wrapType,onWrap=_useWrapCallback.execute,wrapInputError=_useWrapCallback.inputError;var showWrap=wrapType!==WrapType.NOT_APPLICABLE;var trade=showWrap?undefined:v2Trade;// Manage disabled trading pairs that should redirect users to V2\nuseEffect(function(){var _currencies$Field$INP,_currencies$Field$OUT;var disabledSwaps=['BNB','BUSD','USDT','USDC','CAKE','BUNNY','ETH','BTCB','AUTO','XVS','SAFEMOON','DAI','ADA','DOT','ElonGate','TWT','ALPACA'];var inputCurrencySymbol=((_currencies$Field$INP=currencies[Field.INPUT])===null||_currencies$Field$INP===void 0?void 0:_currencies$Field$INP.symbol)||'';var outputCurrencySymbol=((_currencies$Field$OUT=currencies[Field.OUTPUT])===null||_currencies$Field$OUT===void 0?void 0:_currencies$Field$OUT.symbol)||'';var doesInputMatch=disabledSwaps.includes(inputCurrencySymbol);var doesOutputMatch=disabledSwaps.includes(outputCurrencySymbol);if(doesInputMatch&&doesOutputMatch){// Prevent infinite re-render of modal with this condition\nif(!hasPoppedModal){setHasPoppedModal(true);onPresentV2ExchangeRedirectModalRef.current();}// Controls the swap buttons being disabled & renders a message\nsetDisableSwap(true);var tick=function tick(){setModalCountdownSecondsRemaining(function(prevSeconds){return prevSeconds-1;});};var timerInterval=setInterval(function(){return tick();},1000);if(interruptRedirectCountdown){// Reset timer if countdown is interrupted\nclearInterval(timerInterval);setModalCountdownSecondsRemaining(5);}if(modalCountdownSecondsRemaining<=0){window.location.href='https://exchange.pancakeswap.finance/#/swap';}return function(){clearInterval(timerInterval);};}// Unset disableSwap state if the swap inputs & outputs dont match disabledSwaps\nsetDisableSwap(false);return undefined;},[currencies,hasPoppedModal,modalCountdownSecondsRemaining,onPresentV2ExchangeRedirectModalRef,interruptRedirectCountdown]);var parsedAmounts=showWrap?(_ref4={},_defineProperty(_ref4,Field.INPUT,parsedAmount),_defineProperty(_ref4,Field.OUTPUT,parsedAmount),_ref4):(_ref5={},_defineProperty(_ref5,Field.INPUT,independentField===Field.INPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.inputAmount),_defineProperty(_ref5,Field.OUTPUT,independentField===Field.OUTPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.outputAmount),_ref5);var _useSwapActionHandler=useSwapActionHandlers(),onSwitchTokens=_useSwapActionHandler.onSwitchTokens,onCurrencySelection=_useSwapActionHandler.onCurrencySelection,onUserInput=_useSwapActionHandler.onUserInput,onChangeRecipient=_useSwapActionHandler.onChangeRecipient;var isValid=!swapInputError;var dependentField=independentField===Field.INPUT?Field.OUTPUT:Field.INPUT;var handleTypeInput=useCallback(function(value){onUserInput(Field.INPUT,value);},[onUserInput]);var handleTypeOutput=useCallback(function(value){onUserInput(Field.OUTPUT,value);},[onUserInput]);// modal and loading\nvar _useState13=useState({showConfirm:false,tradeToConfirm:undefined,attemptingTxn:false,swapErrorMessage:undefined,txHash:undefined}),_useState14=_slicedToArray(_useState13,2),_useState14$=_useState14[0],showConfirm=_useState14$.showConfirm,tradeToConfirm=_useState14$.tradeToConfirm,swapErrorMessage=_useState14$.swapErrorMessage,attemptingTxn=_useState14$.attemptingTxn,txHash=_useState14$.txHash,setSwapState=_useState14[1];var formattedAmounts=(_formattedAmounts={},_defineProperty(_formattedAmounts,independentField,typedValue),_defineProperty(_formattedAmounts,dependentField,showWrap?(_parsedAmounts$indepe=(_parsedAmounts$indepe2=parsedAmounts[independentField])===null||_parsedAmounts$indepe2===void 0?void 0:_parsedAmounts$indepe2.toExact())!==null&&_parsedAmounts$indepe!==void 0?_parsedAmounts$indepe:'':(_parsedAmounts$depend=(_parsedAmounts$depend2=parsedAmounts[dependentField])===null||_parsedAmounts$depend2===void 0?void 0:_parsedAmounts$depend2.toSignificant(6))!==null&&_parsedAmounts$depend!==void 0?_parsedAmounts$depend:''),_formattedAmounts);var route=trade===null||trade===void 0?void 0:trade.route;var userHasSpecifiedInputOutput=Boolean(currencies[Field.INPUT]&&currencies[Field.OUTPUT]&&((_parsedAmounts$indepe3=parsedAmounts[independentField])===null||_parsedAmounts$indepe3===void 0?void 0:_parsedAmounts$indepe3.greaterThan(JSBI.BigInt(0))));var noRoute=!route;// check whether the user has approved the router on the input token\nvar _useApproveCallbackFr=useApproveCallbackFromTrade(trade,allowedSlippage),_useApproveCallbackFr2=_slicedToArray(_useApproveCallbackFr,2),approval=_useApproveCallbackFr2[0],approveCallback=_useApproveCallbackFr2[1];// check if user has gone through approval process, used to show two step buttons, reset on token change\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),approvalSubmitted=_useState16[0],setApprovalSubmitted=_useState16[1];// mark when a user has submitted an approval, reset onTokenSelection for input field\nuseEffect(function(){if(approval===ApprovalState.PENDING){setApprovalSubmitted(true);}},[approval,approvalSubmitted]);var maxAmountInput=maxAmountSpend(currencyBalances[Field.INPUT]);var atMaxAmountInput=Boolean(maxAmountInput&&((_parsedAmounts$Field$=parsedAmounts[Field.INPUT])===null||_parsedAmounts$Field$===void 0?void 0:_parsedAmounts$Field$.equalTo(maxAmountInput)));// the callback to execute the swap\nvar _useSwapCallback=useSwapCallback(trade,allowedSlippage,deadline,recipient),swapCallback=_useSwapCallback.callback,swapCallbackError=_useSwapCallback.error;var _computeTradePriceBre=computeTradePriceBreakdown(trade),priceImpactWithoutFee=_computeTradePriceBre.priceImpactWithoutFee;var handleSwap=useCallback(function(){if(priceImpactWithoutFee&&!confirmPriceImpactWithoutFee(priceImpactWithoutFee)){return;}if(!swapCallback){return;}setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{attemptingTxn:true,swapErrorMessage:undefined,txHash:undefined});});swapCallback().then(function(hash){setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{attemptingTxn:false,swapErrorMessage:undefined,txHash:hash});});}).catch(function(error){setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{attemptingTxn:false,swapErrorMessage:error.message,txHash:undefined});});});},[priceImpactWithoutFee,swapCallback,setSwapState]);// errors\nvar _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showInverted=_useState18[0],setShowInverted=_useState18[1];// warnings on slippage\nvar priceImpactSeverity=warningSeverity(priceImpactWithoutFee);// show approve flow when: no error on inputs, not approved or pending, or approved in current session\n// never show if price impact is above threshold in non expert mode\nvar showApproveFlow=!swapInputError&&(approval===ApprovalState.NOT_APPROVED||approval===ApprovalState.PENDING||approvalSubmitted&&approval===ApprovalState.APPROVED)&&!(priceImpactSeverity>3&&!isExpertMode);var handleConfirmDismiss=useCallback(function(){setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{showConfirm:false});});// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.INPUT,'');}},[onUserInput,txHash,setSwapState]);var handleAcceptChanges=useCallback(function(){setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{tradeToConfirm:trade});});},[trade]);// This will check to see if the user has selected Syrup or SafeMoon to either buy or sell.\n// If so, they will be alerted with a warning message.\nvar checkForWarning=useCallback(function(selected,purchaseType){if(['SYRUP','SAFEMOON'].includes(selected)){setTransactionWarning({selectedToken:selected,purchaseType:purchaseType});}},[setTransactionWarning]);var handleInputSelect=useCallback(function(inputCurrency){setHasPoppedModal(false);setInterruptRedirectCountdown(false);setApprovalSubmitted(false);// reset 2 step UI for approvals\nonCurrencySelection(Field.INPUT,inputCurrency);if(inputCurrency.symbol==='SYRUP'){checkForWarning(inputCurrency.symbol,'Selling');}if(inputCurrency.symbol==='SAFEMOON'){checkForWarning(inputCurrency.symbol,'Selling');}},[onCurrencySelection,setApprovalSubmitted,checkForWarning]);var handleMaxInput=useCallback(function(){if(maxAmountInput){onUserInput(Field.INPUT,maxAmountInput.toExact());}},[maxAmountInput,onUserInput]);var handleOutputSelect=useCallback(function(outputCurrency){setHasPoppedModal(false);setInterruptRedirectCountdown(false);onCurrencySelection(Field.OUTPUT,outputCurrency);if(outputCurrency.symbol==='SYRUP'){checkForWarning(outputCurrency.symbol,'Buying');}if(outputCurrency.symbol==='SAFEMOON'){checkForWarning(outputCurrency.symbol,'Buying');}},[onCurrencySelection,checkForWarning]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(TokenWarningModal,{isOpen:urlLoadedTokens.length>0&&!dismissTokenWarning,tokens:urlLoadedTokens,onConfirm:handleConfirmTokenWarning}),/*#__PURE__*/_jsx(SyrupWarningModal,{isOpen:transactionWarning.selectedToken==='SYRUP',transactionType:transactionWarning.purchaseType,onConfirm:handleConfirmWarning}),/*#__PURE__*/_jsx(SafeMoonWarningModal,{isOpen:transactionWarning.selectedToken==='SAFEMOON',onConfirm:handleConfirmWarning}),/*#__PURE__*/_jsx(CardNav,{}),/*#__PURE__*/_jsx(AppBody,{children:/*#__PURE__*/_jsxs(Wrapper,{id:\"swap-page\",children:[/*#__PURE__*/_jsx(ConfirmSwapModal,{isOpen:showConfirm,trade:trade,originalTrade:tradeToConfirm,onAcceptChanges:handleAcceptChanges,attemptingTxn:attemptingTxn,txHash:txHash,recipient:recipient,allowedSlippage:allowedSlippage,onConfirm:handleSwap,swapErrorMessage:swapErrorMessage,onDismiss:handleConfirmDismiss}),/*#__PURE__*/_jsx(PageHeader,{title:TranslateString(8,'Exchange'),description:TranslateString(1192,'Trade tokens in an instant')}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(CurrencyInputPanel,{label:independentField===Field.OUTPUT&&!showWrap&&trade?TranslateString(194,'From (estimated)'):TranslateString(76,'From'),value:formattedAmounts[Field.INPUT],showMaxButton:!atMaxAmountInput,currency:currencies[Field.INPUT],onUserInput:handleTypeInput,onMax:handleMaxInput,onCurrencySelect:handleInputSelect,otherCurrency:currencies[Field.OUTPUT],id:\"swap-currency-input\"}),/*#__PURE__*/_jsx(AutoColumn,{justify:\"space-between\",children:/*#__PURE__*/_jsxs(AutoRow,{justify:isExpertMode?'space-between':'center',style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:true,children:/*#__PURE__*/_jsx(IconButton,{variant:\"tertiary\",onClick:function onClick(){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonSwitchTokens();},style:{borderRadius:'50%'},scale:\"sm\",children:/*#__PURE__*/_jsx(ArrowDownIcon,{color:\"primary\",width:\"24px\"})})}),recipient===null&&!showWrap&&isExpertMode?/*#__PURE__*/_jsx(LinkStyledButton,{id:\"add-recipient-button\",onClick:function onClick(){return onChangeRecipient('');},children:\"+ Add a send (optional)\"}):null]})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{value:formattedAmounts[Field.OUTPUT],onUserInput:handleTypeOutput,label:independentField===Field.INPUT&&!showWrap&&trade?TranslateString(196,'To (estimated)'):TranslateString(80,'To'),showMaxButton:false,currency:currencies[Field.OUTPUT],onCurrencySelect:handleOutputSelect,otherCurrency:currencies[Field.INPUT],id:\"swap-currency-output\"}),recipient!==null&&!showWrap?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:false,children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.colors.textSubtle})}),/*#__PURE__*/_jsx(LinkStyledButton,{id:\"remove-recipient-button\",onClick:function onClick(){return onChangeRecipient(null);},children:\"- Remove send\"})]}),/*#__PURE__*/_jsx(AddressInputPanel,{id:\"recipient\",value:recipient,onChange:onChangeRecipient})]}):null,showWrap?null:/*#__PURE__*/_jsx(Card,{padding:\".25rem .75rem 0 .75rem\",borderRadius:\"20px\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"4px\",children:[Boolean(trade)&&/*#__PURE__*/_jsxs(RowBetween,{align:\"center\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"14px\",children:TranslateString(1182,'Price')}),/*#__PURE__*/_jsx(TradePrice,{price:trade===null||trade===void 0?void 0:trade.executionPrice,showInverted:showInverted,setShowInverted:setShowInverted})]}),allowedSlippage!==INITIAL_ALLOWED_SLIPPAGE&&/*#__PURE__*/_jsxs(RowBetween,{align:\"center\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"14px\",children:TranslateString(88,'Slippage Tolerance')}),/*#__PURE__*/_jsxs(Text,{fontSize:\"14px\",children:[allowedSlippage/100,\"%\"]})]})]})})]}),/*#__PURE__*/_jsxs(BottomGrouping,{children:[disableSwap&&/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",justifyContent:\"center\",mb:\"1rem\",children:/*#__PURE__*/_jsxs(Text,{color:\"failure\",children:[\"Please use\",' ',/*#__PURE__*/_jsx(StyledLink,{external:true,href:\"https://exchange.pancakeswap.finance\",children:\"PancakeSwap V2\"}),' ',\"to make this trade\"]})}),!account?/*#__PURE__*/_jsx(ConnectWalletButton,{width:\"100%\"}):showWrap?/*#__PURE__*/_jsx(Button,{disabled:Boolean(wrapInputError),onClick:onWrap,width:\"100%\",children:wrapInputError!==null&&wrapInputError!==void 0?wrapInputError:wrapType===WrapType.WRAP?'Wrap':wrapType===WrapType.UNWRAP?'Unwrap':null}):noRoute&&userHasSpecifiedInputOutput?/*#__PURE__*/_jsx(GreyCard,{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(Text,{mb:\"4px\",children:TranslateString(1194,'Insufficient liquidity for this trade.')})}):showApproveFlow?/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Button,{onClick:approveCallback,disabled:disableSwap||approval!==ApprovalState.NOT_APPROVED||approvalSubmitted,style:{width:'48%'},variant:approval===ApprovalState.APPROVED?'success':'primary',children:approval===ApprovalState.PENDING?/*#__PURE__*/_jsxs(AutoRow,{gap:\"6px\",justify:\"center\",children:[\"Approving \",/*#__PURE__*/_jsx(Loader,{stroke:\"white\"})]}):approvalSubmitted&&approval===ApprovalState.APPROVED?'Approved':\"Approve \".concat((_currencies$Field$INP2=currencies[Field.INPUT])===null||_currencies$Field$INP2===void 0?void 0:_currencies$Field$INP2.symbol)}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},style:{width:'48%'},id:\"swap-button\",disabled:disableSwap||!isValid||approval!==ApprovalState.APPROVED||priceImpactSeverity>3&&!isExpertMode,variant:isValid&&priceImpactSeverity>2?'danger':'primary',children:priceImpactSeverity>3&&!isExpertMode?\"Price Impact High\":\"Swap\".concat(priceImpactSeverity>2?' Anyway':'')})]}):/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},id:\"swap-button\",disabled:disableSwap||!isValid||priceImpactSeverity>3&&!isExpertMode||!!swapCallbackError,variant:isValid&&priceImpactSeverity>2&&!swapCallbackError?'danger':'primary',width:\"100%\",children:swapInputError||(priceImpactSeverity>3&&!isExpertMode?\"Price Impact Too High\":\"Swap\".concat(priceImpactSeverity>2?' Anyway':''))}),showApproveFlow&&/*#__PURE__*/_jsx(ProgressSteps,{steps:[approval===ApprovalState.APPROVED]}),isExpertMode&&swapErrorMessage?/*#__PURE__*/_jsx(SwapCallbackError,{error:swapErrorMessage}):null]})]})]})}),/*#__PURE__*/_jsx(AdvancedSwapDetailsDropdown,{trade:trade})]});};export default Swap;","map":{"version":3,"sources":["C:/Program Files (x86)/Ampps/www/swap/new/PanCakeSwapFork-main/src/pages/Swap/index.tsx"],"names":["JSBI","Token","React","useCallback","useContext","useEffect","useMemo","useState","useRef","ArrowDown","CardBody","ArrowDownIcon","Button","IconButton","Text","useModal","Link","Flex","styled","ThemeContext","AddressInputPanel","Card","GreyCard","AutoColumn","ConfirmSwapModal","CurrencyInputPanel","CardNav","AutoRow","RowBetween","AdvancedSwapDetailsDropdown","confirmPriceImpactWithoutFee","ArrowWrapper","BottomGrouping","SwapCallbackError","Wrapper","TradePrice","TokenWarningModal","SyrupWarningModal","SafeMoonWarningModal","ProgressSteps","Container","INITIAL_ALLOWED_SLIPPAGE","useActiveWeb3React","useCurrency","ApprovalState","useApproveCallbackFromTrade","useSwapCallback","useWrapCallback","WrapType","Field","useDefaultsFromURLSearch","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","useExpertModeManager","useUserDeadline","useUserSlippageTolerance","LinkStyledButton","maxAmountSpend","computeTradePriceBreakdown","warningSeverity","Loader","useI18n","PageHeader","ConnectWalletButton","V2ExchangeRedirectModal","AppBody","StyledLink","theme","colors","failure","Swap","loadedUrlParams","TranslateString","modalCountdownSecondsRemaining","setModalCountdownSecondsRemaining","disableSwap","setDisableSwap","hasPoppedModal","setHasPoppedModal","interruptRedirectCountdown","setInterruptRedirectCountdown","onPresentV2ExchangeRedirectModal","onPresentV2ExchangeRedirectModalRef","inputCurrencyId","outputCurrencyId","loadedInputCurrency","loadedOutputCurrency","dismissTokenWarning","setDismissTokenWarning","selectedToken","purchaseType","transactionWarning","setTransactionWarning","urlLoadedTokens","filter","c","handleConfirmTokenWarning","handleConfirmWarning","account","isExpertMode","deadline","allowedSlippage","independentField","typedValue","recipient","v2Trade","currencyBalances","parsedAmount","currencies","swapInputError","inputError","INPUT","OUTPUT","wrapType","onWrap","execute","wrapInputError","showWrap","NOT_APPLICABLE","trade","undefined","disabledSwaps","inputCurrencySymbol","symbol","outputCurrencySymbol","doesInputMatch","includes","doesOutputMatch","current","tick","prevSeconds","timerInterval","setInterval","clearInterval","window","location","href","parsedAmounts","inputAmount","outputAmount","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","isValid","dependentField","handleTypeInput","value","handleTypeOutput","showConfirm","tradeToConfirm","attemptingTxn","swapErrorMessage","txHash","setSwapState","formattedAmounts","toExact","toSignificant","route","userHasSpecifiedInputOutput","Boolean","greaterThan","BigInt","noRoute","approval","approveCallback","approvalSubmitted","setApprovalSubmitted","PENDING","maxAmountInput","atMaxAmountInput","equalTo","swapCallback","callback","swapCallbackError","error","priceImpactWithoutFee","handleSwap","prevState","then","hash","catch","message","showInverted","setShowInverted","priceImpactSeverity","showApproveFlow","NOT_APPROVED","APPROVED","handleConfirmDismiss","handleAcceptChanges","checkForWarning","selected","handleInputSelect","inputCurrency","handleMaxInput","handleOutputSelect","outputCurrency","length","padding","borderRadius","textSubtle","executionPrice","WRAP","UNWRAP","textAlign","width"],"mappings":"8hCAAA,OAAyBA,IAAzB,CAA+BC,KAA/B,KAAmD,uBAAnD,CACA,MAAOC,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,UAA7B,CAAyCC,SAAzC,CAAoDC,OAApD,CAA6DC,QAA7D,CAAuEC,MAAvE,KAAqF,OAArF,CACA,OAASC,SAAT,KAA0B,eAA1B,CACA,OAASC,QAAT,CAAmBC,aAAnB,CAAkCC,MAAlC,CAA0CC,UAA1C,CAAsDC,IAAtD,CAA4DC,QAA5D,CAAsEC,IAAtE,CAA4EC,IAA5E,KAAwF,cAAxF,CACA,MAAOC,CAAAA,MAAP,EAAiBC,YAAjB,KAAqC,mBAArC,CACA,MAAOC,CAAAA,iBAAP,KAA8B,8BAA9B,CACA,MAAOC,CAAAA,IAAP,EAAeC,QAAf,KAA+B,iBAA/B,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,kCAA7B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,+BAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,gBAApC,CACA,MAAOC,CAAAA,2BAAP,KAAwC,6CAAxC,CACA,MAAOC,CAAAA,4BAAP,KAAyC,8CAAzC,CACA,OAASC,YAAT,CAAuBC,cAAvB,CAAuCC,iBAAvC,CAA0DC,OAA1D,KAAyE,yBAAzE,CACA,MAAOC,CAAAA,UAAP,KAAuB,4BAAvB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,8BAA9B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,8BAA9B,CACA,MAAOC,CAAAA,oBAAP,KAAiC,iCAAjC,CACA,MAAOC,CAAAA,aAAP,KAA0B,0BAA1B,CACA,MAAOC,CAAAA,SAAP,KAAsB,sBAAtB,CAEA,OAASC,wBAAT,KAAyC,iBAAzC,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,aAAT,CAAwBC,2BAAxB,KAA2D,0BAA3D,CACA,OAASC,eAAT,KAAgC,uBAAhC,CACA,MAAOC,CAAAA,eAAP,EAA0BC,QAA1B,KAA0C,uBAA1C,CACA,OAASC,KAAT,KAAsB,oBAAtB,CACA,OAASC,wBAAT,CAAmCC,kBAAnC,CAAuDC,qBAAvD,CAA8EC,YAA9E,KAAkG,kBAAlG,CACA,OAASC,oBAAT,CAA+BC,eAA/B,CAAgDC,wBAAhD,KAAgF,kBAAhF,CACA,OAASC,gBAAT,KAAiC,mBAAjC,CACA,OAASC,cAAT,KAA+B,sBAA/B,CACA,OAASC,0BAAT,CAAqCC,eAArC,KAA4D,cAA5D,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,uBAAvB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,gCAAhC,CACA,MAAOC,CAAAA,uBAAP,KAAoC,oCAApC,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CAEA,GAAMC,CAAAA,UAAU,CAAGjD,MAAM,CAACF,IAAD,CAAT,mBAEL,kBAAGoD,CAAAA,KAAH,MAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,MAAN,CAAaC,OAA5B,EAFK,CAAhB,CAKA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,iMACjB,GAAMC,CAAAA,eAAe,CAAGtB,wBAAwB,EAAhD,CACA,GAAMuB,CAAAA,eAAe,CAAGX,OAAO,EAA/B,CAFiB,cAG2DvD,QAAQ,CAAC,CAAD,CAHnE,wCAGVmE,8BAHU,eAGsBC,iCAHtB,8BAIqBpE,QAAQ,CAAC,KAAD,CAJ7B,yCAIVqE,WAJU,eAIGC,cAJH,8BAK2BtE,QAAQ,CAAC,KAAD,CALnC,yCAKVuE,cALU,eAKMC,iBALN,8BAMmDxE,QAAQ,CAAC,KAAD,CAN3D,yCAMVyE,0BANU,eAMkBC,6BANlB,6BAO0BlE,QAAQ,cACjD,KAAC,uBAAD,EAAyB,gBAAgB,CAAE,kCAAMkE,CAAAA,6BAA6B,CAAC,IAAD,CAAnC,EAA3C,EADiD,CAPlC,wCAOVC,gCAPU,eAUjB,GAAMC,CAAAA,mCAAmC,CAAG3E,MAAM,CAAC0E,gCAAD,CAAlD,CACA;AAXiB,UAYmC,CAClDvC,WAAW,CAAC6B,eAAD,SAACA,eAAD,iBAACA,eAAe,CAAEY,eAAlB,CADuC,CAElDzC,WAAW,CAAC6B,eAAD,SAACA,eAAD,iBAACA,eAAe,CAAEa,gBAAlB,CAFuC,CAZnC,CAYVC,mBAZU,UAYWC,oBAZX,yBAgBqChF,QAAQ,CAAU,KAAV,CAhB7C,0CAgBViF,mBAhBU,gBAgBWC,sBAhBX,gCAiBmClF,QAAQ,CAGzD,CACDmF,aAAa,CAAE,IADd,CAEDC,YAAY,CAAE,IAFb,CAHyD,CAjB3C,2CAiBVC,kBAjBU,gBAiBUC,qBAjBV,gBAwBjB,GAAMC,CAAAA,eAAwB,CAAGxF,OAAO,CACtC,mDAAM,CAACgF,mBAAD,CAAsBC,oBAAtB,CAAN,gCAAM,MAA6CQ,MAA7C,CAAoD,SAACC,CAAD,QAAmBA,CAAAA,CAAC,WAAY/F,CAAAA,KAAhC,EAApD,CAAN,mCAAoG,EAApG,EADsC,CAEtC,CAACqF,mBAAD,CAAsBC,oBAAtB,CAFsC,CAAxC,CAIA,GAAMU,CAAAA,yBAAyB,CAAG9F,WAAW,CAAC,UAAM,CAClDsF,sBAAsB,CAAC,IAAD,CAAtB,CACD,CAF4C,CAE1C,EAF0C,CAA7C,CAIA,GAAMS,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjCL,qBAAqB,CAAC,CACpBH,aAAa,CAAE,IADK,CAEpBC,YAAY,CAAE,IAFM,CAAD,CAArB,CAID,CALD,CAhCiB,wBAuCGjD,kBAAkB,EAvCrB,CAuCTyD,OAvCS,qBAuCTA,OAvCS,CAwCjB,GAAM/B,CAAAA,KAAK,CAAGhE,UAAU,CAACe,YAAD,CAAxB,CAxCiB,0BA0CMmC,oBAAoB,EA1C1B,gEA0CV8C,YA1CU,2BA4CjB;AA5CiB,qBA6CE7C,eAAe,EA7CjB,sDA6CV8C,QA7CU,gDA8CS7C,wBAAwB,EA9CjC,gEA8CV8C,eA9CU,2BAgDjB;AAhDiB,kBAiDmCjD,YAAY,EAjD/C,CAiDTkD,gBAjDS,eAiDTA,gBAjDS,CAiDSC,UAjDT,eAiDSA,UAjDT,CAiDqBC,SAjDrB,eAiDqBA,SAjDrB,yBAkD2EtD,kBAAkB,EAlD7F,CAkDTuD,OAlDS,qBAkDTA,OAlDS,CAkDAC,gBAlDA,qBAkDAA,gBAlDA,CAkDkBC,YAlDlB,qBAkDkBA,YAlDlB,CAkDgCC,UAlDhC,qBAkDgCA,UAlDhC,CAkDwDC,cAlDxD,qBAkD4CC,UAlD5C,sBAmDiDhE,eAAe,CAC/E8D,UAAU,CAAC5D,KAAK,CAAC+D,KAAP,CADqE,CAE/EH,UAAU,CAAC5D,KAAK,CAACgE,MAAP,CAFqE,CAG/ET,UAH+E,CAnDhE,CAmDTU,QAnDS,kBAmDTA,QAnDS,CAmDUC,MAnDV,kBAmDCC,OAnDD,CAmD8BC,cAnD9B,kBAmDkBN,UAnDlB,CAwDjB,GAAMO,CAAAA,QAAiB,CAAGJ,QAAQ,GAAKlE,QAAQ,CAACuE,cAAhD,CACA,GAAMC,CAAAA,KAAK,CAAGF,QAAQ,CAAGG,SAAH,CAAef,OAArC,CAEA;AACArG,SAAS,CAAC,UAAM,iDACd,GAAMqH,CAAAA,aAAa,CAAG,CACpB,KADoB,CAEpB,MAFoB,CAGpB,MAHoB,CAIpB,MAJoB,CAKpB,MALoB,CAMpB,OANoB,CAOpB,KAPoB,CAQpB,MARoB,CASpB,MAToB,CAUpB,KAVoB,CAWpB,UAXoB,CAYpB,KAZoB,CAapB,KAboB,CAcpB,KAdoB,CAepB,UAfoB,CAgBpB,KAhBoB,CAiBpB,QAjBoB,CAAtB,CAmBA,GAAMC,CAAAA,mBAAmB,CAAG,wBAAAd,UAAU,CAAC5D,KAAK,CAAC+D,KAAP,CAAV,sEAAyBY,MAAzB,GAAmC,EAA/D,CACA,GAAMC,CAAAA,oBAAoB,CAAG,wBAAAhB,UAAU,CAAC5D,KAAK,CAACgE,MAAP,CAAV,sEAA0BW,MAA1B,GAAoC,EAAjE,CACA,GAAME,CAAAA,cAAc,CAAGJ,aAAa,CAACK,QAAd,CAAuBJ,mBAAvB,CAAvB,CACA,GAAMK,CAAAA,eAAe,CAAGN,aAAa,CAACK,QAAd,CAAuBF,oBAAvB,CAAxB,CAEA,GAAIC,cAAc,EAAIE,eAAtB,CAAuC,CACrC;AACA,GAAI,CAAClD,cAAL,CAAqB,CACnBC,iBAAiB,CAAC,IAAD,CAAjB,CACAI,mCAAmC,CAAC8C,OAApC,GACD,CAED;AACApD,cAAc,CAAC,IAAD,CAAd,CAEA,GAAMqD,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACjBvD,iCAAiC,CAAC,SAACwD,WAAD,QAAiBA,CAAAA,WAAW,CAAG,CAA/B,EAAD,CAAjC,CACD,CAFD,CAGA,GAAMC,CAAAA,aAAa,CAAGC,WAAW,CAAC,iBAAMH,CAAAA,IAAI,EAAV,EAAD,CAAe,IAAf,CAAjC,CAEA,GAAIlD,0BAAJ,CAAgC,CAC9B;AACAsD,aAAa,CAACF,aAAD,CAAb,CACAzD,iCAAiC,CAAC,CAAD,CAAjC,CACD,CAED,GAAID,8BAA8B,EAAI,CAAtC,CAAyC,CACvC6D,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,6CAAvB,CACD,CAED,MAAO,WAAM,CACXH,aAAa,CAACF,aAAD,CAAb,CACD,CAFD,CAGD,CAED;AACAvD,cAAc,CAAC,KAAD,CAAd,CACA,MAAO4C,CAAAA,SAAP,CACD,CA1DQ,CA0DN,CACDZ,UADC,CAED/B,cAFC,CAGDJ,8BAHC,CAIDS,mCAJC,CAKDH,0BALC,CA1DM,CAAT,CAkEA,GAAM0D,CAAAA,aAAa,CAAGpB,QAAQ,iCAEvBrE,KAAK,CAAC+D,KAFiB,CAETJ,YAFS,wBAGvB3D,KAAK,CAACgE,MAHiB,CAGRL,YAHQ,yCAMvB3D,KAAK,CAAC+D,KANiB,CAMTT,gBAAgB,GAAKtD,KAAK,CAAC+D,KAA3B,CAAmCJ,YAAnC,CAAkDY,KAAlD,SAAkDA,KAAlD,iBAAkDA,KAAK,CAAEmB,WANhD,wBAOvB1F,KAAK,CAACgE,MAPiB,CAORV,gBAAgB,GAAKtD,KAAK,CAACgE,MAA3B,CAAoCL,YAApC,CAAmDY,KAAnD,SAAmDA,KAAnD,iBAAmDA,KAAK,CAAEoB,YAPlD,QAA9B,CA9HiB,0BAwI+DxF,qBAAqB,EAxIpF,CAwITyF,cAxIS,uBAwITA,cAxIS,CAwIOC,mBAxIP,uBAwIOA,mBAxIP,CAwI4BC,WAxI5B,uBAwI4BA,WAxI5B,CAwIyCC,iBAxIzC,uBAwIyCA,iBAxIzC,CAyIjB,GAAMC,CAAAA,OAAO,CAAG,CAACnC,cAAjB,CACA,GAAMoC,CAAAA,cAAqB,CAAG3C,gBAAgB,GAAKtD,KAAK,CAAC+D,KAA3B,CAAmC/D,KAAK,CAACgE,MAAzC,CAAkDhE,KAAK,CAAC+D,KAAtF,CAEA,GAAMmC,CAAAA,eAAe,CAAGhJ,WAAW,CACjC,SAACiJ,KAAD,CAAmB,CACjBL,WAAW,CAAC9F,KAAK,CAAC+D,KAAP,CAAcoC,KAAd,CAAX,CACD,CAHgC,CAIjC,CAACL,WAAD,CAJiC,CAAnC,CAMA,GAAMM,CAAAA,gBAAgB,CAAGlJ,WAAW,CAClC,SAACiJ,KAAD,CAAmB,CACjBL,WAAW,CAAC9F,KAAK,CAACgE,MAAP,CAAemC,KAAf,CAAX,CACD,CAHiC,CAIlC,CAACL,WAAD,CAJkC,CAApC,CAOA;AAzJiB,gBA0JgFxI,QAAQ,CAMtG,CACD+I,WAAW,CAAE,KADZ,CAEDC,cAAc,CAAE9B,SAFf,CAGD+B,aAAa,CAAE,KAHd,CAIDC,gBAAgB,CAAEhC,SAJjB,CAKDiC,MAAM,CAAEjC,SALP,CANsG,CA1JxF,uEA0JR6B,WA1JQ,cA0JRA,WA1JQ,CA0JKC,cA1JL,cA0JKA,cA1JL,CA0JqBE,gBA1JrB,cA0JqBA,gBA1JrB,CA0JuCD,aA1JvC,cA0JuCA,aA1JvC,CA0JsDE,MA1JtD,cA0JsDA,MA1JtD,CA0JgEC,YA1JhE,gBAwKjB,GAAMC,CAAAA,gBAAgB,yDACnBrD,gBADmB,CACAC,UADA,oCAEnB0C,cAFmB,CAEF5B,QAAQ,gDACtBoB,aAAa,CAACnC,gBAAD,CADS,iDACtB,uBAAiCsD,OAAjC,EADsB,+DACwB,EADxB,gDAEtBnB,aAAa,CAACQ,cAAD,CAFS,iDAEtB,uBAA+BY,aAA/B,CAA6C,CAA7C,CAFsB,+DAE6B,EAJnC,oBAAtB,CAOA,GAAMC,CAAAA,KAAK,CAAGvC,KAAH,SAAGA,KAAH,iBAAGA,KAAK,CAAEuC,KAArB,CACA,GAAMC,CAAAA,2BAA2B,CAAGC,OAAO,CACzCpD,UAAU,CAAC5D,KAAK,CAAC+D,KAAP,CAAV,EAA2BH,UAAU,CAAC5D,KAAK,CAACgE,MAAP,CAArC,2BAAuDyB,aAAa,CAACnC,gBAAD,CAApE,iDAAuD,uBAAiC2D,WAAjC,CAA6ClK,IAAI,CAACmK,MAAL,CAAY,CAAZ,CAA7C,CAAvD,CADyC,CAA3C,CAGA,GAAMC,CAAAA,OAAO,CAAG,CAACL,KAAjB,CAEA;AArLiB,0BAsLmBlH,2BAA2B,CAAC2E,KAAD,CAAQlB,eAAR,CAtL9C,gEAsLV+D,QAtLU,2BAsLAC,eAtLA,2BAwLjB;AAxLiB,gBAyLiC/J,QAAQ,CAAU,KAAV,CAzLzC,2CAyLVgK,iBAzLU,gBAyLSC,oBAzLT,gBA2LjB;AACAnK,SAAS,CAAC,UAAM,CACd,GAAIgK,QAAQ,GAAKzH,aAAa,CAAC6H,OAA/B,CAAwC,CACtCD,oBAAoB,CAAC,IAAD,CAApB,CACD,CACF,CAJQ,CAIN,CAACH,QAAD,CAAWE,iBAAX,CAJM,CAAT,CAMA,GAAMG,CAAAA,cAA0C,CAAGhH,cAAc,CAACiD,gBAAgB,CAAC1D,KAAK,CAAC+D,KAAP,CAAjB,CAAjE,CACA,GAAM2D,CAAAA,gBAAgB,CAAGV,OAAO,CAACS,cAAc,0BAAIhC,aAAa,CAACzF,KAAK,CAAC+D,KAAP,CAAjB,gDAAI,sBAA4B4D,OAA5B,CAAoCF,cAApC,CAAJ,CAAf,CAAhC,CAEA;AArMiB,qBAsM4C5H,eAAe,CAC1E0E,KAD0E,CAE1ElB,eAF0E,CAG1ED,QAH0E,CAI1EI,SAJ0E,CAtM3D,CAsMCoE,YAtMD,kBAsMTC,QAtMS,CAsMsBC,iBAtMtB,kBAsMeC,KAtMf,2BA6MiBrH,0BAA0B,CAAC6D,KAAD,CA7M3C,CA6MTyD,qBA7MS,uBA6MTA,qBA7MS,CA+MjB,GAAMC,CAAAA,UAAU,CAAG/K,WAAW,CAAC,UAAM,CACnC,GAAI8K,qBAAqB,EAAI,CAACnJ,4BAA4B,CAACmJ,qBAAD,CAA1D,CAAmF,CACjF,OACD,CACD,GAAI,CAACJ,YAAL,CAAmB,CACjB,OACD,CACDlB,YAAY,CAAC,SAACwB,SAAD,wCAAqBA,SAArB,MAAgC3B,aAAa,CAAE,IAA/C,CAAqDC,gBAAgB,CAAEhC,SAAvE,CAAkFiC,MAAM,CAAEjC,SAA1F,IAAD,CAAZ,CACAoD,YAAY,GACTO,IADH,CACQ,SAACC,IAAD,CAAU,CACd1B,YAAY,CAAC,SAACwB,SAAD,wCACRA,SADQ,MAEX3B,aAAa,CAAE,KAFJ,CAGXC,gBAAgB,CAAEhC,SAHP,CAIXiC,MAAM,CAAE2B,IAJG,IAAD,CAAZ,CAMD,CARH,EASGC,KATH,CASS,SAACN,KAAD,CAAW,CAChBrB,YAAY,CAAC,SAACwB,SAAD,wCACRA,SADQ,MAEX3B,aAAa,CAAE,KAFJ,CAGXC,gBAAgB,CAAEuB,KAAK,CAACO,OAHb,CAIX7B,MAAM,CAAEjC,SAJG,IAAD,CAAZ,CAMD,CAhBH,EAiBD,CAzB6B,CAyB3B,CAACwD,qBAAD,CAAwBJ,YAAxB,CAAsClB,YAAtC,CAzB2B,CAA9B,CA2BA;AA1OiB,gBA2OuBpJ,QAAQ,CAAU,KAAV,CA3O/B,2CA2OViL,YA3OU,gBA2OIC,eA3OJ,gBA6OjB;AACA,GAAMC,CAAAA,mBAAmB,CAAG9H,eAAe,CAACqH,qBAAD,CAA3C,CAEA;AACA;AACA,GAAMU,CAAAA,eAAe,CACnB,CAAC7E,cAAD,GACCuD,QAAQ,GAAKzH,aAAa,CAACgJ,YAA3B,EACCvB,QAAQ,GAAKzH,aAAa,CAAC6H,OAD5B,EAEEF,iBAAiB,EAAIF,QAAQ,GAAKzH,aAAa,CAACiJ,QAHnD,GAIA,EAAEH,mBAAmB,CAAG,CAAtB,EAA2B,CAACtF,YAA9B,CALF,CAOA,GAAM0F,CAAAA,oBAAoB,CAAG3L,WAAW,CAAC,UAAM,CAC7CwJ,YAAY,CAAC,SAACwB,SAAD,wCAAqBA,SAArB,MAAgC7B,WAAW,CAAE,KAA7C,IAAD,CAAZ,CAEA;AACA,GAAII,MAAJ,CAAY,CACVX,WAAW,CAAC9F,KAAK,CAAC+D,KAAP,CAAc,EAAd,CAAX,CACD,CACF,CAPuC,CAOrC,CAAC+B,WAAD,CAAcW,MAAd,CAAsBC,YAAtB,CAPqC,CAAxC,CASA,GAAMoC,CAAAA,mBAAmB,CAAG5L,WAAW,CAAC,UAAM,CAC5CwJ,YAAY,CAAC,SAACwB,SAAD,wCAAqBA,SAArB,MAAgC5B,cAAc,CAAE/B,KAAhD,IAAD,CAAZ,CACD,CAFsC,CAEpC,CAACA,KAAD,CAFoC,CAAvC,CAIA;AACA;AACA,GAAMwE,CAAAA,eAAe,CAAG7L,WAAW,CACjC,SAAC8L,QAAD,CAAmBtG,YAAnB,CAA4C,CAC1C,GAAI,CAAC,OAAD,CAAU,UAAV,EAAsBoC,QAAtB,CAA+BkE,QAA/B,CAAJ,CAA8C,CAC5CpG,qBAAqB,CAAC,CACpBH,aAAa,CAAEuG,QADK,CAEpBtG,YAAY,CAAZA,YAFoB,CAAD,CAArB,CAID,CACF,CARgC,CASjC,CAACE,qBAAD,CATiC,CAAnC,CAYA,GAAMqG,CAAAA,iBAAiB,CAAG/L,WAAW,CACnC,SAACgM,aAAD,CAAmB,CACjBpH,iBAAiB,CAAC,KAAD,CAAjB,CACAE,6BAA6B,CAAC,KAAD,CAA7B,CACAuF,oBAAoB,CAAC,KAAD,CAApB,CAA4B;AAC5B1B,mBAAmB,CAAC7F,KAAK,CAAC+D,KAAP,CAAcmF,aAAd,CAAnB,CACA,GAAIA,aAAa,CAACvE,MAAd,GAAyB,OAA7B,CAAsC,CACpCoE,eAAe,CAACG,aAAa,CAACvE,MAAf,CAAuB,SAAvB,CAAf,CACD,CACD,GAAIuE,aAAa,CAACvE,MAAd,GAAyB,UAA7B,CAAyC,CACvCoE,eAAe,CAACG,aAAa,CAACvE,MAAf,CAAuB,SAAvB,CAAf,CACD,CACF,CAZkC,CAanC,CAACkB,mBAAD,CAAsB0B,oBAAtB,CAA4CwB,eAA5C,CAbmC,CAArC,CAgBA,GAAMI,CAAAA,cAAc,CAAGjM,WAAW,CAAC,UAAM,CACvC,GAAIuK,cAAJ,CAAoB,CAClB3B,WAAW,CAAC9F,KAAK,CAAC+D,KAAP,CAAc0D,cAAc,CAACb,OAAf,EAAd,CAAX,CACD,CACF,CAJiC,CAI/B,CAACa,cAAD,CAAiB3B,WAAjB,CAJ+B,CAAlC,CAMA,GAAMsD,CAAAA,kBAAkB,CAAGlM,WAAW,CACpC,SAACmM,cAAD,CAAoB,CAClBvH,iBAAiB,CAAC,KAAD,CAAjB,CACAE,6BAA6B,CAAC,KAAD,CAA7B,CACA6D,mBAAmB,CAAC7F,KAAK,CAACgE,MAAP,CAAeqF,cAAf,CAAnB,CACA,GAAIA,cAAc,CAAC1E,MAAf,GAA0B,OAA9B,CAAuC,CACrCoE,eAAe,CAACM,cAAc,CAAC1E,MAAhB,CAAwB,QAAxB,CAAf,CACD,CACD,GAAI0E,cAAc,CAAC1E,MAAf,GAA0B,UAA9B,CAA0C,CACxCoE,eAAe,CAACM,cAAc,CAAC1E,MAAhB,CAAwB,QAAxB,CAAf,CACD,CACF,CAXmC,CAYpC,CAACkB,mBAAD,CAAsBkD,eAAtB,CAZoC,CAAtC,CAeA,mBACE,MAAC,SAAD,yBACE,KAAC,iBAAD,EACE,MAAM,CAAElG,eAAe,CAACyG,MAAhB,CAAyB,CAAzB,EAA8B,CAAC/G,mBADzC,CAEE,MAAM,CAAEM,eAFV,CAGE,SAAS,CAAEG,yBAHb,EADF,cAME,KAAC,iBAAD,EACE,MAAM,CAAEL,kBAAkB,CAACF,aAAnB,GAAqC,OAD/C,CAEE,eAAe,CAAEE,kBAAkB,CAACD,YAFtC,CAGE,SAAS,CAAEO,oBAHb,EANF,cAWE,KAAC,oBAAD,EAAsB,MAAM,CAAEN,kBAAkB,CAACF,aAAnB,GAAqC,UAAnE,CAA+E,SAAS,CAAEQ,oBAA1F,EAXF,cAYE,KAAC,OAAD,IAZF,cAaE,KAAC,OAAD,wBACE,MAAC,OAAD,EAAS,EAAE,CAAC,WAAZ,wBACE,KAAC,gBAAD,EACE,MAAM,CAAEoD,WADV,CAEE,KAAK,CAAE9B,KAFT,CAGE,aAAa,CAAE+B,cAHjB,CAIE,eAAe,CAAEwC,mBAJnB,CAKE,aAAa,CAAEvC,aALjB,CAME,MAAM,CAAEE,MANV,CAOE,SAAS,CAAEjD,SAPb,CAQE,eAAe,CAAEH,eARnB,CASE,SAAS,CAAE4E,UATb,CAUE,gBAAgB,CAAEzB,gBAVpB,CAWE,SAAS,CAAEqC,oBAXb,EADF,cAcE,KAAC,UAAD,EACE,KAAK,CAAErH,eAAe,CAAC,CAAD,CAAI,UAAJ,CADxB,CAEE,WAAW,CAAEA,eAAe,CAAC,IAAD,CAAO,4BAAP,CAF9B,EAdF,cAkBE,MAAC,QAAD,yBACE,MAAC,UAAD,EAAY,GAAG,CAAC,IAAhB,wBACE,KAAC,kBAAD,EACE,KAAK,CACH8B,gBAAgB,GAAKtD,KAAK,CAACgE,MAA3B,EAAqC,CAACK,QAAtC,EAAkDE,KAAlD,CACI/C,eAAe,CAAC,GAAD,CAAM,kBAAN,CADnB,CAEIA,eAAe,CAAC,EAAD,CAAK,MAAL,CAJvB,CAME,KAAK,CAAEmF,gBAAgB,CAAC3G,KAAK,CAAC+D,KAAP,CANzB,CAOE,aAAa,CAAE,CAAC2D,gBAPlB,CAQE,QAAQ,CAAE9D,UAAU,CAAC5D,KAAK,CAAC+D,KAAP,CARtB,CASE,WAAW,CAAEmC,eATf,CAUE,KAAK,CAAEiD,cAVT,CAWE,gBAAgB,CAAEF,iBAXpB,CAYE,aAAa,CAAErF,UAAU,CAAC5D,KAAK,CAACgE,MAAP,CAZ3B,CAaE,EAAE,CAAC,qBAbL,EADF,cAgBE,KAAC,UAAD,EAAY,OAAO,CAAC,eAApB,uBACE,MAAC,OAAD,EAAS,OAAO,CAAEb,YAAY,CAAG,eAAH,CAAqB,QAAnD,CAA6D,KAAK,CAAE,CAAEoG,OAAO,CAAE,QAAX,CAApE,wBACE,KAAC,YAAD,EAAc,SAAS,KAAvB,uBACE,KAAC,UAAD,EACE,OAAO,CAAC,UADV,CAEE,OAAO,CAAE,kBAAM,CACbhC,oBAAoB,CAAC,KAAD,CAApB,CAA4B;AAC5B3B,cAAc,GACf,CALH,CAME,KAAK,CAAE,CAAE4D,YAAY,CAAE,KAAhB,CANT,CAOE,KAAK,CAAC,IAPR,uBASE,KAAC,aAAD,EAAe,KAAK,CAAC,SAArB,CAA+B,KAAK,CAAC,MAArC,EATF,EADF,EADF,CAcGhG,SAAS,GAAK,IAAd,EAAsB,CAACa,QAAvB,EAAmClB,YAAnC,cACC,KAAC,gBAAD,EAAkB,EAAE,CAAC,sBAArB,CAA4C,OAAO,CAAE,yBAAM4C,CAAAA,iBAAiB,CAAC,EAAD,CAAvB,EAArD,qCADD,CAIG,IAlBN,GADF,EAhBF,cAsCE,KAAC,kBAAD,EACE,KAAK,CAAEY,gBAAgB,CAAC3G,KAAK,CAACgE,MAAP,CADzB,CAEE,WAAW,CAAEoC,gBAFf,CAGE,KAAK,CACH9C,gBAAgB,GAAKtD,KAAK,CAAC+D,KAA3B,EAAoC,CAACM,QAArC,EAAiDE,KAAjD,CACI/C,eAAe,CAAC,GAAD,CAAM,gBAAN,CADnB,CAEIA,eAAe,CAAC,EAAD,CAAK,IAAL,CANvB,CAQE,aAAa,CAAE,KARjB,CASE,QAAQ,CAAEoC,UAAU,CAAC5D,KAAK,CAACgE,MAAP,CATtB,CAUE,gBAAgB,CAAEoF,kBAVpB,CAWE,aAAa,CAAExF,UAAU,CAAC5D,KAAK,CAAC+D,KAAP,CAX3B,CAYE,EAAE,CAAC,sBAZL,EAtCF,CAqDGP,SAAS,GAAK,IAAd,EAAsB,CAACa,QAAvB,cACC,wCACE,MAAC,OAAD,EAAS,OAAO,CAAC,eAAjB,CAAiC,KAAK,CAAE,CAAEkF,OAAO,CAAE,QAAX,CAAxC,wBACE,KAAC,YAAD,EAAc,SAAS,CAAE,KAAzB,uBACE,KAAC,SAAD,EAAW,IAAI,CAAC,IAAhB,CAAqB,KAAK,CAAEpI,KAAK,CAACC,MAAN,CAAaqI,UAAzC,EADF,EADF,cAIE,KAAC,gBAAD,EAAkB,EAAE,CAAC,yBAArB,CAA+C,OAAO,CAAE,yBAAM1D,CAAAA,iBAAiB,CAAC,IAAD,CAAvB,EAAxD,2BAJF,GADF,cASE,KAAC,iBAAD,EAAmB,EAAE,CAAC,WAAtB,CAAkC,KAAK,CAAEvC,SAAzC,CAAoD,QAAQ,CAAEuC,iBAA9D,EATF,GADD,CAYG,IAjEN,CAmEG1B,QAAQ,CAAG,IAAH,cACP,KAAC,IAAD,EAAM,OAAO,CAAC,wBAAd,CAAuC,YAAY,CAAC,MAApD,uBACE,MAAC,UAAD,EAAY,GAAG,CAAC,KAAhB,WACG2C,OAAO,CAACzC,KAAD,CAAP,eACC,MAAC,UAAD,EAAY,KAAK,CAAC,QAAlB,wBACE,KAAC,IAAD,EAAM,QAAQ,CAAC,MAAf,UAAuB/C,eAAe,CAAC,IAAD,CAAO,OAAP,CAAtC,EADF,cAEE,KAAC,UAAD,EACE,KAAK,CAAE+C,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEmF,cADhB,CAEE,YAAY,CAAEnB,YAFhB,CAGE,eAAe,CAAEC,eAHnB,EAFF,GAFJ,CAWGnF,eAAe,GAAK7D,wBAApB,eACC,MAAC,UAAD,EAAY,KAAK,CAAC,QAAlB,wBACE,KAAC,IAAD,EAAM,QAAQ,CAAC,MAAf,UAAuBgC,eAAe,CAAC,EAAD,CAAK,oBAAL,CAAtC,EADF,cAEE,MAAC,IAAD,EAAM,QAAQ,CAAC,MAAf,WAAuB6B,eAAe,CAAG,GAAzC,OAFF,GAZJ,GADF,EApEJ,GADF,cA2FE,MAAC,cAAD,YACG1B,WAAW,eACV,KAAC,IAAD,EAAM,UAAU,CAAC,QAAjB,CAA0B,cAAc,CAAC,QAAzC,CAAkD,EAAE,CAAC,MAArD,uBACE,MAAC,IAAD,EAAM,KAAK,CAAC,SAAZ,wBACa,GADb,cAEE,KAAC,UAAD,EAAY,QAAQ,KAApB,CAAqB,IAAI,CAAC,sCAA1B,4BAFF,CAIgB,GAJhB,wBADF,EAFJ,CAYG,CAACuB,OAAD,cACC,KAAC,mBAAD,EAAqB,KAAK,CAAC,MAA3B,EADD,CAEGmB,QAAQ,cACV,KAAC,MAAD,EAAQ,QAAQ,CAAE2C,OAAO,CAAC5C,cAAD,CAAzB,CAA2C,OAAO,CAAEF,MAApD,CAA4D,KAAK,CAAC,MAAlE,UACGE,cADH,SACGA,cADH,UACGA,cADH,CAEKH,QAAQ,GAAKlE,QAAQ,CAAC4J,IAAtB,CAA6B,MAA7B,CAAsC1F,QAAQ,GAAKlE,QAAQ,CAAC6J,MAAtB,CAA+B,QAA/B,CAA0C,IAFrF,EADU,CAKRzC,OAAO,EAAIJ,2BAAX,cACF,KAAC,QAAD,EAAU,KAAK,CAAE,CAAE8C,SAAS,CAAE,QAAb,CAAjB,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,KAAT,UAAgBrI,eAAe,CAAC,IAAD,CAAO,wCAAP,CAA/B,EADF,EADE,CAIAkH,eAAe,cACjB,MAAC,UAAD,yBACE,KAAC,MAAD,EACE,OAAO,CAAErB,eADX,CAEE,QAAQ,CAAE1F,WAAW,EAAIyF,QAAQ,GAAKzH,aAAa,CAACgJ,YAA1C,EAA0DrB,iBAFtE,CAGE,KAAK,CAAE,CAAEwC,KAAK,CAAE,KAAT,CAHT,CAIE,OAAO,CAAE1C,QAAQ,GAAKzH,aAAa,CAACiJ,QAA3B,CAAsC,SAAtC,CAAkD,SAJ7D,UAMGxB,QAAQ,GAAKzH,aAAa,CAAC6H,OAA3B,cACC,MAAC,OAAD,EAAS,GAAG,CAAC,KAAb,CAAmB,OAAO,CAAC,QAA3B,qCACY,KAAC,MAAD,EAAQ,MAAM,CAAC,OAAf,EADZ,GADD,CAIGF,iBAAiB,EAAIF,QAAQ,GAAKzH,aAAa,CAACiJ,QAAhD,CACF,UADE,2CAGShF,UAAU,CAAC5D,KAAK,CAAC+D,KAAP,CAHnB,iDAGS,uBAAyBY,MAHlC,CAVN,EADF,cAiBE,KAAC,MAAD,EACE,OAAO,CAAE,kBAAM,CACb,GAAIxB,YAAJ,CAAkB,CAChB8E,UAAU,GACX,CAFD,IAEO,CACLvB,YAAY,CAAC,CACXJ,cAAc,CAAE/B,KADL,CAEXgC,aAAa,CAAE,KAFJ,CAGXC,gBAAgB,CAAEhC,SAHP,CAIX6B,WAAW,CAAE,IAJF,CAKXI,MAAM,CAAEjC,SALG,CAAD,CAAZ,CAOD,CACF,CAbH,CAcE,KAAK,CAAE,CAAEsF,KAAK,CAAE,KAAT,CAdT,CAeE,EAAE,CAAC,aAfL,CAgBE,QAAQ,CACNnI,WAAW,EACX,CAACqE,OADD,EAEAoB,QAAQ,GAAKzH,aAAa,CAACiJ,QAF3B,EAGCH,mBAAmB,CAAG,CAAtB,EAA2B,CAACtF,YApBjC,CAsBE,OAAO,CAAE6C,OAAO,EAAIyC,mBAAmB,CAAG,CAAjC,CAAqC,QAArC,CAAgD,SAtB3D,UAwBGA,mBAAmB,CAAG,CAAtB,EAA2B,CAACtF,YAA5B,mCAEUsF,mBAAmB,CAAG,CAAtB,CAA0B,SAA1B,CAAsC,EAFhD,CAxBH,EAjBF,GADiB,cAgDjB,KAAC,MAAD,EACE,OAAO,CAAE,kBAAM,CACb,GAAItF,YAAJ,CAAkB,CAChB8E,UAAU,GACX,CAFD,IAEO,CACLvB,YAAY,CAAC,CACXJ,cAAc,CAAE/B,KADL,CAEXgC,aAAa,CAAE,KAFJ,CAGXC,gBAAgB,CAAEhC,SAHP,CAIX6B,WAAW,CAAE,IAJF,CAKXI,MAAM,CAAEjC,SALG,CAAD,CAAZ,CAOD,CACF,CAbH,CAcE,EAAE,CAAC,aAdL,CAeE,QAAQ,CACN7C,WAAW,EAAI,CAACqE,OAAhB,EAA4ByC,mBAAmB,CAAG,CAAtB,EAA2B,CAACtF,YAAxD,EAAyE,CAAC,CAAC2E,iBAhB/E,CAkBE,OAAO,CAAE9B,OAAO,EAAIyC,mBAAmB,CAAG,CAAjC,EAAsC,CAACX,iBAAvC,CAA2D,QAA3D,CAAsE,SAlBjF,CAmBE,KAAK,CAAC,MAnBR,UAqBGjE,cAAc,GACZ4E,mBAAmB,CAAG,CAAtB,EAA2B,CAACtF,YAA5B,uCAEUsF,mBAAmB,CAAG,CAAtB,CAA0B,SAA1B,CAAsC,EAFhD,CADY,CArBjB,EAvEJ,CAkGGC,eAAe,eAAI,KAAC,aAAD,EAAe,KAAK,CAAE,CAACtB,QAAQ,GAAKzH,aAAa,CAACiJ,QAA5B,CAAtB,EAlGtB,CAmGGzF,YAAY,EAAIqD,gBAAhB,cAAmC,KAAC,iBAAD,EAAmB,KAAK,CAAEA,gBAA1B,EAAnC,CAAoF,IAnGvF,GA3FF,GAlBF,GADF,EAbF,cAmOE,KAAC,2BAAD,EAA6B,KAAK,CAAEjC,KAApC,EAnOF,GADF,CAuOD,CAhiBD,CAkiBA,cAAejD,CAAAA,IAAf","sourcesContent":["import { CurrencyAmount, JSBI, Token, Trade } from '@pancakeswap-libs/sdk'\nimport React, { useCallback, useContext, useEffect, useMemo, useState, useRef } from 'react'\nimport { ArrowDown } from 'react-feather'\nimport { CardBody, ArrowDownIcon, Button, IconButton, Text, useModal, Link, Flex } from 'waltor-uikit'\nimport styled, { ThemeContext } from 'styled-components'\nimport AddressInputPanel from 'components/AddressInputPanel'\nimport Card, { GreyCard } from 'components/Card'\nimport { AutoColumn } from 'components/Column'\nimport ConfirmSwapModal from 'components/swap/ConfirmSwapModal'\nimport CurrencyInputPanel from 'components/CurrencyInputPanel'\nimport CardNav from 'components/CardNav'\nimport { AutoRow, RowBetween } from 'components/Row'\nimport AdvancedSwapDetailsDropdown from 'components/swap/AdvancedSwapDetailsDropdown'\nimport confirmPriceImpactWithoutFee from 'components/swap/confirmPriceImpactWithoutFee'\nimport { ArrowWrapper, BottomGrouping, SwapCallbackError, Wrapper } from 'components/swap/styleds'\nimport TradePrice from 'components/swap/TradePrice'\nimport TokenWarningModal from 'components/TokenWarningModal'\nimport SyrupWarningModal from 'components/SyrupWarningModal'\nimport SafeMoonWarningModal from 'components/SafeMoonWarningModal'\nimport ProgressSteps from 'components/ProgressSteps'\nimport Container from 'components/Container'\n\nimport { INITIAL_ALLOWED_SLIPPAGE } from 'constants/index'\nimport { useActiveWeb3React } from 'hooks'\nimport { useCurrency } from 'hooks/Tokens'\nimport { ApprovalState, useApproveCallbackFromTrade } from 'hooks/useApproveCallback'\nimport { useSwapCallback } from 'hooks/useSwapCallback'\nimport useWrapCallback, { WrapType } from 'hooks/useWrapCallback'\nimport { Field } from 'state/swap/actions'\nimport { useDefaultsFromURLSearch, useDerivedSwapInfo, useSwapActionHandlers, useSwapState } from 'state/swap/hooks'\nimport { useExpertModeManager, useUserDeadline, useUserSlippageTolerance } from 'state/user/hooks'\nimport { LinkStyledButton } from 'components/Shared'\nimport { maxAmountSpend } from 'utils/maxAmountSpend'\nimport { computeTradePriceBreakdown, warningSeverity } from 'utils/prices'\nimport Loader from 'components/Loader'\nimport useI18n from 'hooks/useI18n'\nimport PageHeader from 'components/PageHeader'\nimport ConnectWalletButton from 'components/ConnectWalletButton'\nimport V2ExchangeRedirectModal from 'components/V2ExchangeRedirectModal'\nimport AppBody from '../AppBody'\n\nconst StyledLink = styled(Link)`\n  display: inline;\n  color: ${({ theme }) => theme.colors.failure};\n`\n\nconst Swap = () => {\n  const loadedUrlParams = useDefaultsFromURLSearch()\n  const TranslateString = useI18n()\n  const [modalCountdownSecondsRemaining, setModalCountdownSecondsRemaining] = useState(5)\n  const [disableSwap, setDisableSwap] = useState(false)\n  const [hasPoppedModal, setHasPoppedModal] = useState(false)\n  const [interruptRedirectCountdown, setInterruptRedirectCountdown] = useState(false)\n  const [onPresentV2ExchangeRedirectModal] = useModal(\n    <V2ExchangeRedirectModal handleCloseModal={() => setInterruptRedirectCountdown(true)} />\n  )\n  const onPresentV2ExchangeRedirectModalRef = useRef(onPresentV2ExchangeRedirectModal)\n  // token warning stuff\n  const [loadedInputCurrency, loadedOutputCurrency] = [\n    useCurrency(loadedUrlParams?.inputCurrencyId),\n    useCurrency(loadedUrlParams?.outputCurrencyId),\n  ]\n  const [dismissTokenWarning, setDismissTokenWarning] = useState<boolean>(false)\n  const [transactionWarning, setTransactionWarning] = useState<{\n    selectedToken: string | null\n    purchaseType: string | null\n  }>({\n    selectedToken: null,\n    purchaseType: null,\n  })\n  const urlLoadedTokens: Token[] = useMemo(\n    () => [loadedInputCurrency, loadedOutputCurrency]?.filter((c): c is Token => c instanceof Token) ?? [],\n    [loadedInputCurrency, loadedOutputCurrency]\n  )\n  const handleConfirmTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n  }, [])\n\n  const handleConfirmWarning = () => {\n    setTransactionWarning({\n      selectedToken: null,\n      purchaseType: null,\n    })\n  }\n\n  const { account } = useActiveWeb3React()\n  const theme = useContext(ThemeContext)\n\n  const [isExpertMode] = useExpertModeManager()\n\n  // get custom setting values for user\n  const [deadline] = useUserDeadline()\n  const [allowedSlippage] = useUserSlippageTolerance()\n\n  // swap state\n  const { independentField, typedValue, recipient } = useSwapState()\n  const { v2Trade, currencyBalances, parsedAmount, currencies, inputError: swapInputError } = useDerivedSwapInfo()\n  const { wrapType, execute: onWrap, inputError: wrapInputError } = useWrapCallback(\n    currencies[Field.INPUT],\n    currencies[Field.OUTPUT],\n    typedValue\n  )\n  const showWrap: boolean = wrapType !== WrapType.NOT_APPLICABLE\n  const trade = showWrap ? undefined : v2Trade\n\n  // Manage disabled trading pairs that should redirect users to V2\n  useEffect(() => {\n    const disabledSwaps = [\n      'BNB',\n      'BUSD',\n      'USDT',\n      'USDC',\n      'CAKE',\n      'BUNNY',\n      'ETH',\n      'BTCB',\n      'AUTO',\n      'XVS',\n      'SAFEMOON',\n      'DAI',\n      'ADA',\n      'DOT',\n      'ElonGate',\n      'TWT',\n      'ALPACA',\n    ]\n    const inputCurrencySymbol = currencies[Field.INPUT]?.symbol || ''\n    const outputCurrencySymbol = currencies[Field.OUTPUT]?.symbol || ''\n    const doesInputMatch = disabledSwaps.includes(inputCurrencySymbol)\n    const doesOutputMatch = disabledSwaps.includes(outputCurrencySymbol)\n\n    if (doesInputMatch && doesOutputMatch) {\n      // Prevent infinite re-render of modal with this condition\n      if (!hasPoppedModal) {\n        setHasPoppedModal(true)\n        onPresentV2ExchangeRedirectModalRef.current()\n      }\n\n      // Controls the swap buttons being disabled & renders a message\n      setDisableSwap(true)\n\n      const tick = () => {\n        setModalCountdownSecondsRemaining((prevSeconds) => prevSeconds - 1)\n      }\n      const timerInterval = setInterval(() => tick(), 1000)\n\n      if (interruptRedirectCountdown) {\n        // Reset timer if countdown is interrupted\n        clearInterval(timerInterval)\n        setModalCountdownSecondsRemaining(5)\n      }\n\n      if (modalCountdownSecondsRemaining <= 0) {\n        window.location.href = 'https://exchange.pancakeswap.finance/#/swap'\n      }\n\n      return () => {\n        clearInterval(timerInterval)\n      }\n    }\n\n    // Unset disableSwap state if the swap inputs & outputs dont match disabledSwaps\n    setDisableSwap(false)\n    return undefined\n  }, [\n    currencies,\n    hasPoppedModal,\n    modalCountdownSecondsRemaining,\n    onPresentV2ExchangeRedirectModalRef,\n    interruptRedirectCountdown,\n  ])\n\n  const parsedAmounts = showWrap\n    ? {\n        [Field.INPUT]: parsedAmount,\n        [Field.OUTPUT]: parsedAmount,\n      }\n    : {\n        [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade?.inputAmount,\n        [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade?.outputAmount,\n      }\n\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\n  const isValid = !swapInputError\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n\n  const handleTypeInput = useCallback(\n    (value: string) => {\n      onUserInput(Field.INPUT, value)\n    },\n    [onUserInput]\n  )\n  const handleTypeOutput = useCallback(\n    (value: string) => {\n      onUserInput(Field.OUTPUT, value)\n    },\n    [onUserInput]\n  )\n\n  // modal and loading\n  const [{ showConfirm, tradeToConfirm, swapErrorMessage, attemptingTxn, txHash }, setSwapState] = useState<{\n    showConfirm: boolean\n    tradeToConfirm: Trade | undefined\n    attemptingTxn: boolean\n    swapErrorMessage: string | undefined\n    txHash: string | undefined\n  }>({\n    showConfirm: false,\n    tradeToConfirm: undefined,\n    attemptingTxn: false,\n    swapErrorMessage: undefined,\n    txHash: undefined,\n  })\n\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: showWrap\n      ? parsedAmounts[independentField]?.toExact() ?? ''\n      : parsedAmounts[dependentField]?.toSignificant(6) ?? '',\n  }\n\n  const route = trade?.route\n  const userHasSpecifiedInputOutput = Boolean(\n    currencies[Field.INPUT] && currencies[Field.OUTPUT] && parsedAmounts[independentField]?.greaterThan(JSBI.BigInt(0))\n  )\n  const noRoute = !route\n\n  // check whether the user has approved the router on the input token\n  const [approval, approveCallback] = useApproveCallbackFromTrade(trade, allowedSlippage)\n\n  // check if user has gone through approval process, used to show two step buttons, reset on token change\n  const [approvalSubmitted, setApprovalSubmitted] = useState<boolean>(false)\n\n  // mark when a user has submitted an approval, reset onTokenSelection for input field\n  useEffect(() => {\n    if (approval === ApprovalState.PENDING) {\n      setApprovalSubmitted(true)\n    }\n  }, [approval, approvalSubmitted])\n\n  const maxAmountInput: CurrencyAmount | undefined = maxAmountSpend(currencyBalances[Field.INPUT])\n  const atMaxAmountInput = Boolean(maxAmountInput && parsedAmounts[Field.INPUT]?.equalTo(maxAmountInput))\n\n  // the callback to execute the swap\n  const { callback: swapCallback, error: swapCallbackError } = useSwapCallback(\n    trade,\n    allowedSlippage,\n    deadline,\n    recipient\n  )\n\n  const { priceImpactWithoutFee } = computeTradePriceBreakdown(trade)\n\n  const handleSwap = useCallback(() => {\n    if (priceImpactWithoutFee && !confirmPriceImpactWithoutFee(priceImpactWithoutFee)) {\n      return\n    }\n    if (!swapCallback) {\n      return\n    }\n    setSwapState((prevState) => ({ ...prevState, attemptingTxn: true, swapErrorMessage: undefined, txHash: undefined }))\n    swapCallback()\n      .then((hash) => {\n        setSwapState((prevState) => ({\n          ...prevState,\n          attemptingTxn: false,\n          swapErrorMessage: undefined,\n          txHash: hash,\n        }))\n      })\n      .catch((error) => {\n        setSwapState((prevState) => ({\n          ...prevState,\n          attemptingTxn: false,\n          swapErrorMessage: error.message,\n          txHash: undefined,\n        }))\n      })\n  }, [priceImpactWithoutFee, swapCallback, setSwapState])\n\n  // errors\n  const [showInverted, setShowInverted] = useState<boolean>(false)\n\n  // warnings on slippage\n  const priceImpactSeverity = warningSeverity(priceImpactWithoutFee)\n\n  // show approve flow when: no error on inputs, not approved or pending, or approved in current session\n  // never show if price impact is above threshold in non expert mode\n  const showApproveFlow =\n    !swapInputError &&\n    (approval === ApprovalState.NOT_APPROVED ||\n      approval === ApprovalState.PENDING ||\n      (approvalSubmitted && approval === ApprovalState.APPROVED)) &&\n    !(priceImpactSeverity > 3 && !isExpertMode)\n\n  const handleConfirmDismiss = useCallback(() => {\n    setSwapState((prevState) => ({ ...prevState, showConfirm: false }))\n\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onUserInput(Field.INPUT, '')\n    }\n  }, [onUserInput, txHash, setSwapState])\n\n  const handleAcceptChanges = useCallback(() => {\n    setSwapState((prevState) => ({ ...prevState, tradeToConfirm: trade }))\n  }, [trade])\n\n  // This will check to see if the user has selected Syrup or SafeMoon to either buy or sell.\n  // If so, they will be alerted with a warning message.\n  const checkForWarning = useCallback(\n    (selected: string, purchaseType: string) => {\n      if (['SYRUP', 'SAFEMOON'].includes(selected)) {\n        setTransactionWarning({\n          selectedToken: selected,\n          purchaseType,\n        })\n      }\n    },\n    [setTransactionWarning]\n  )\n\n  const handleInputSelect = useCallback(\n    (inputCurrency) => {\n      setHasPoppedModal(false)\n      setInterruptRedirectCountdown(false)\n      setApprovalSubmitted(false) // reset 2 step UI for approvals\n      onCurrencySelection(Field.INPUT, inputCurrency)\n      if (inputCurrency.symbol === 'SYRUP') {\n        checkForWarning(inputCurrency.symbol, 'Selling')\n      }\n      if (inputCurrency.symbol === 'SAFEMOON') {\n        checkForWarning(inputCurrency.symbol, 'Selling')\n      }\n    },\n    [onCurrencySelection, setApprovalSubmitted, checkForWarning]\n  )\n\n  const handleMaxInput = useCallback(() => {\n    if (maxAmountInput) {\n      onUserInput(Field.INPUT, maxAmountInput.toExact())\n    }\n  }, [maxAmountInput, onUserInput])\n\n  const handleOutputSelect = useCallback(\n    (outputCurrency) => {\n      setHasPoppedModal(false)\n      setInterruptRedirectCountdown(false)\n      onCurrencySelection(Field.OUTPUT, outputCurrency)\n      if (outputCurrency.symbol === 'SYRUP') {\n        checkForWarning(outputCurrency.symbol, 'Buying')\n      }\n      if (outputCurrency.symbol === 'SAFEMOON') {\n        checkForWarning(outputCurrency.symbol, 'Buying')\n      }\n    },\n    [onCurrencySelection, checkForWarning]\n  )\n\n  return (\n    <Container>\n      <TokenWarningModal\n        isOpen={urlLoadedTokens.length > 0 && !dismissTokenWarning}\n        tokens={urlLoadedTokens}\n        onConfirm={handleConfirmTokenWarning}\n      />\n      <SyrupWarningModal\n        isOpen={transactionWarning.selectedToken === 'SYRUP'}\n        transactionType={transactionWarning.purchaseType}\n        onConfirm={handleConfirmWarning}\n      />\n      <SafeMoonWarningModal isOpen={transactionWarning.selectedToken === 'SAFEMOON'} onConfirm={handleConfirmWarning} />\n      <CardNav />\n      <AppBody>\n        <Wrapper id=\"swap-page\">\n          <ConfirmSwapModal\n            isOpen={showConfirm}\n            trade={trade}\n            originalTrade={tradeToConfirm}\n            onAcceptChanges={handleAcceptChanges}\n            attemptingTxn={attemptingTxn}\n            txHash={txHash}\n            recipient={recipient}\n            allowedSlippage={allowedSlippage}\n            onConfirm={handleSwap}\n            swapErrorMessage={swapErrorMessage}\n            onDismiss={handleConfirmDismiss}\n          />\n          <PageHeader\n            title={TranslateString(8, 'Exchange')}\n            description={TranslateString(1192, 'Trade tokens in an instant')}\n          />\n          <CardBody>\n            <AutoColumn gap=\"md\">\n              <CurrencyInputPanel\n                label={\n                  independentField === Field.OUTPUT && !showWrap && trade\n                    ? TranslateString(194, 'From (estimated)')\n                    : TranslateString(76, 'From')\n                }\n                value={formattedAmounts[Field.INPUT]}\n                showMaxButton={!atMaxAmountInput}\n                currency={currencies[Field.INPUT]}\n                onUserInput={handleTypeInput}\n                onMax={handleMaxInput}\n                onCurrencySelect={handleInputSelect}\n                otherCurrency={currencies[Field.OUTPUT]}\n                id=\"swap-currency-input\"\n              />\n              <AutoColumn justify=\"space-between\">\n                <AutoRow justify={isExpertMode ? 'space-between' : 'center'} style={{ padding: '0 1rem' }}>\n                  <ArrowWrapper clickable>\n                    <IconButton\n                      variant=\"tertiary\"\n                      onClick={() => {\n                        setApprovalSubmitted(false) // reset 2 step UI for approvals\n                        onSwitchTokens()\n                      }}\n                      style={{ borderRadius: '50%' }}\n                      scale=\"sm\"\n                    >\n                      <ArrowDownIcon color=\"primary\" width=\"24px\" />\n                    </IconButton>\n                  </ArrowWrapper>\n                  {recipient === null && !showWrap && isExpertMode ? (\n                    <LinkStyledButton id=\"add-recipient-button\" onClick={() => onChangeRecipient('')}>\n                      + Add a send (optional)\n                    </LinkStyledButton>\n                  ) : null}\n                </AutoRow>\n              </AutoColumn>\n              <CurrencyInputPanel\n                value={formattedAmounts[Field.OUTPUT]}\n                onUserInput={handleTypeOutput}\n                label={\n                  independentField === Field.INPUT && !showWrap && trade\n                    ? TranslateString(196, 'To (estimated)')\n                    : TranslateString(80, 'To')\n                }\n                showMaxButton={false}\n                currency={currencies[Field.OUTPUT]}\n                onCurrencySelect={handleOutputSelect}\n                otherCurrency={currencies[Field.INPUT]}\n                id=\"swap-currency-output\"\n              />\n\n              {recipient !== null && !showWrap ? (\n                <>\n                  <AutoRow justify=\"space-between\" style={{ padding: '0 1rem' }}>\n                    <ArrowWrapper clickable={false}>\n                      <ArrowDown size=\"16\" color={theme.colors.textSubtle} />\n                    </ArrowWrapper>\n                    <LinkStyledButton id=\"remove-recipient-button\" onClick={() => onChangeRecipient(null)}>\n                      - Remove send\n                    </LinkStyledButton>\n                  </AutoRow>\n                  <AddressInputPanel id=\"recipient\" value={recipient} onChange={onChangeRecipient} />\n                </>\n              ) : null}\n\n              {showWrap ? null : (\n                <Card padding=\".25rem .75rem 0 .75rem\" borderRadius=\"20px\">\n                  <AutoColumn gap=\"4px\">\n                    {Boolean(trade) && (\n                      <RowBetween align=\"center\">\n                        <Text fontSize=\"14px\">{TranslateString(1182, 'Price')}</Text>\n                        <TradePrice\n                          price={trade?.executionPrice}\n                          showInverted={showInverted}\n                          setShowInverted={setShowInverted}\n                        />\n                      </RowBetween>\n                    )}\n                    {allowedSlippage !== INITIAL_ALLOWED_SLIPPAGE && (\n                      <RowBetween align=\"center\">\n                        <Text fontSize=\"14px\">{TranslateString(88, 'Slippage Tolerance')}</Text>\n                        <Text fontSize=\"14px\">{allowedSlippage / 100}%</Text>\n                      </RowBetween>\n                    )}\n                  </AutoColumn>\n                </Card>\n              )}\n            </AutoColumn>\n            <BottomGrouping>\n              {disableSwap && (\n                <Flex alignItems=\"center\" justifyContent=\"center\" mb=\"1rem\">\n                  <Text color=\"failure\">\n                    Please use{' '}\n                    <StyledLink external href=\"https://exchange.pancakeswap.finance\">\n                      PancakeSwap V2\n                    </StyledLink>{' '}\n                    to make this trade\n                  </Text>\n                </Flex>\n              )}\n              {!account ? (\n                <ConnectWalletButton width=\"100%\" />\n              ) : showWrap ? (\n                <Button disabled={Boolean(wrapInputError)} onClick={onWrap} width=\"100%\">\n                  {wrapInputError ??\n                    (wrapType === WrapType.WRAP ? 'Wrap' : wrapType === WrapType.UNWRAP ? 'Unwrap' : null)}\n                </Button>\n              ) : noRoute && userHasSpecifiedInputOutput ? (\n                <GreyCard style={{ textAlign: 'center' }}>\n                  <Text mb=\"4px\">{TranslateString(1194, 'Insufficient liquidity for this trade.')}</Text>\n                </GreyCard>\n              ) : showApproveFlow ? (\n                <RowBetween>\n                  <Button\n                    onClick={approveCallback}\n                    disabled={disableSwap || approval !== ApprovalState.NOT_APPROVED || approvalSubmitted}\n                    style={{ width: '48%' }}\n                    variant={approval === ApprovalState.APPROVED ? 'success' : 'primary'}\n                  >\n                    {approval === ApprovalState.PENDING ? (\n                      <AutoRow gap=\"6px\" justify=\"center\">\n                        Approving <Loader stroke=\"white\" />\n                      </AutoRow>\n                    ) : approvalSubmitted && approval === ApprovalState.APPROVED ? (\n                      'Approved'\n                    ) : (\n                      `Approve ${currencies[Field.INPUT]?.symbol}`\n                    )}\n                  </Button>\n                  <Button\n                    onClick={() => {\n                      if (isExpertMode) {\n                        handleSwap()\n                      } else {\n                        setSwapState({\n                          tradeToConfirm: trade,\n                          attemptingTxn: false,\n                          swapErrorMessage: undefined,\n                          showConfirm: true,\n                          txHash: undefined,\n                        })\n                      }\n                    }}\n                    style={{ width: '48%' }}\n                    id=\"swap-button\"\n                    disabled={\n                      disableSwap ||\n                      !isValid ||\n                      approval !== ApprovalState.APPROVED ||\n                      (priceImpactSeverity > 3 && !isExpertMode)\n                    }\n                    variant={isValid && priceImpactSeverity > 2 ? 'danger' : 'primary'}\n                  >\n                    {priceImpactSeverity > 3 && !isExpertMode\n                      ? `Price Impact High`\n                      : `Swap${priceImpactSeverity > 2 ? ' Anyway' : ''}`}\n                  </Button>\n                </RowBetween>\n              ) : (\n                <Button\n                  onClick={() => {\n                    if (isExpertMode) {\n                      handleSwap()\n                    } else {\n                      setSwapState({\n                        tradeToConfirm: trade,\n                        attemptingTxn: false,\n                        swapErrorMessage: undefined,\n                        showConfirm: true,\n                        txHash: undefined,\n                      })\n                    }\n                  }}\n                  id=\"swap-button\"\n                  disabled={\n                    disableSwap || !isValid || (priceImpactSeverity > 3 && !isExpertMode) || !!swapCallbackError\n                  }\n                  variant={isValid && priceImpactSeverity > 2 && !swapCallbackError ? 'danger' : 'primary'}\n                  width=\"100%\"\n                >\n                  {swapInputError ||\n                    (priceImpactSeverity > 3 && !isExpertMode\n                      ? `Price Impact Too High`\n                      : `Swap${priceImpactSeverity > 2 ? ' Anyway' : ''}`)}\n                </Button>\n              )}\n              {showApproveFlow && <ProgressSteps steps={[approval === ApprovalState.APPROVED]} />}\n              {isExpertMode && swapErrorMessage ? <SwapCallbackError error={swapErrorMessage} /> : null}\n            </BottomGrouping>\n          </CardBody>\n        </Wrapper>\n      </AppBody>\n      <AdvancedSwapDetailsDropdown trade={trade} />\n    </Container>\n  )\n}\n\nexport default Swap\n"]},"metadata":{},"sourceType":"module"}