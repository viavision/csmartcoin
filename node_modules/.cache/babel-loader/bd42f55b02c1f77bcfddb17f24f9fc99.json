{"ast":null,"code":"import _slicedToArray from\"/home/bilal/Downloads/final1/final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useMemo}from'react';import{Card,CardHeader,CardBody,Text,Box,Button,Flex,ArrowDownIcon,Link}from'waltor-uikit';import{useTokenBalancesWithLoadingIndicator}from'state/wallet/hooks';import{toV2LiquidityToken,useTrackedTokenPairs}from'state/user/hooks';import{StyledInternalLink}from'components/Shared';import{useActiveWeb3React}from'hooks';import{usePairs}from'data/Reserves';import FullPositionCard from'components/PositionCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ArrowSeparator=function ArrowSeparator(){return/*#__PURE__*/_jsx(Flex,{justifyContent:\"center\",my:\"24px\",children:/*#__PURE__*/_jsx(ArrowDownIcon,{color:\"textSubtle\",width:\"24px\"})});};var SecondCard=function SecondCard(){var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;// fetch the user's balances of all tracked V2 LP tokens\nvar trackedTokenPairs=useTrackedTokenPairs();var tokenPairsWithLiquidityTokens=useMemo(function(){return trackedTokenPairs.map(function(tokens){return{liquidityToken:toV2LiquidityToken(tokens),tokens:tokens};});},[trackedTokenPairs]);var liquidityTokens=useMemo(function(){return tokenPairsWithLiquidityTokens.map(function(tpwlt){return tpwlt.liquidityToken;});},[tokenPairsWithLiquidityTokens]);var _useTokenBalancesWith=useTokenBalancesWithLoadingIndicator(account!==null&&account!==void 0?account:undefined,liquidityTokens),_useTokenBalancesWith2=_slicedToArray(_useTokenBalancesWith,2),v2PairsBalances=_useTokenBalancesWith2[0],fetchingV2PairBalances=_useTokenBalancesWith2[1];// fetch the reserves for all V2 pools in which the user has a balance\nvar liquidityTokensWithBalances=useMemo(function(){return tokenPairsWithLiquidityTokens.filter(function(_ref){var _v2PairsBalances$liqu;var liquidityToken=_ref.liquidityToken;return(_v2PairsBalances$liqu=v2PairsBalances[liquidityToken.address])===null||_v2PairsBalances$liqu===void 0?void 0:_v2PairsBalances$liqu.greaterThan('0');});},[tokenPairsWithLiquidityTokens,v2PairsBalances]);var v2Pairs=usePairs(liquidityTokensWithBalances.map(function(_ref2){var tokens=_ref2.tokens;return tokens;}));var v2IsLoading=fetchingV2PairBalances||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.length)<liquidityTokensWithBalances.length||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.some(function(V2Pair){return!V2Pair;}));var allV2PairsWithLiquidity=v2Pairs.map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),pair=_ref4[1];return pair;}).filter(function(v2Pair){return Boolean(v2Pair);});return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardHeader,{children:[/*#__PURE__*/_jsx(Text,{bold:true,children:\"Remove Liquidity\"}),/*#__PURE__*/_jsx(Text,{small:true,color:\"textSubtle\",children:\"Unstake your old LP tokens from the old liquidity pools\"})]}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Text,{bold:true,children:\"V1 LP Tokens in wallet\"}),/*#__PURE__*/_jsx(Card,{children:v2IsLoading?/*#__PURE__*/_jsx(CardBody,{children:\"Loading\"}):/*#__PURE__*/_jsxs(CardBody,{children:[(allV2PairsWithLiquidity===null||allV2PairsWithLiquidity===void 0?void 0:allV2PairsWithLiquidity.length)>0?/*#__PURE__*/_jsx(_Fragment,{children:allV2PairsWithLiquidity.map(function(v2Pair,index){return/*#__PURE__*/_jsx(Box,{mb:index<allV2PairsWithLiquidity.length-1?'16px':0,children:/*#__PURE__*/_jsx(FullPositionCard,{pair:v2Pair},v2Pair.liquidityToken.address)});})}):/*#__PURE__*/_jsx(Text,{color:\"textDisabled\",textAlign:\"center\",children:\"No liquidity found.\"}),/*#__PURE__*/_jsxs(Text,{mt:\"16px\",textAlign:\"center\",children:[\"Don't see a pool you joined?\",' ',/*#__PURE__*/_jsx(StyledInternalLink,{id:\"import-pool-link\",to:\"/find\",children:\"Import it\"})]})]})}),/*#__PURE__*/_jsx(ArrowSeparator,{}),/*#__PURE__*/_jsx(Text,{bold:true,children:\"Discontinued V2 LP\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Text,{textAlign:\"center\",mb:\"16px\",children:\"If you added liquidity to V2 LPs during the migration attempt on April 23, you need to unstake and remove liquidity.\"}),/*#__PURE__*/_jsx(Button,{as:Link,external:true,href:\"https://hiccup.pancakeswap.finance/#/pool\",style:{width:'100%'},children:\"Remove\"})]})})]})]});};export default SecondCard;","map":{"version":3,"sources":["/home/bilal/Downloads/final1/final/src/pages/Migration/SecondCard.tsx"],"names":["React","useMemo","Card","CardHeader","CardBody","Text","Box","Button","Flex","ArrowDownIcon","Link","useTokenBalancesWithLoadingIndicator","toV2LiquidityToken","useTrackedTokenPairs","StyledInternalLink","useActiveWeb3React","usePairs","FullPositionCard","ArrowSeparator","SecondCard","account","trackedTokenPairs","tokenPairsWithLiquidityTokens","map","tokens","liquidityToken","liquidityTokens","tpwlt","undefined","v2PairsBalances","fetchingV2PairBalances","liquidityTokensWithBalances","filter","address","greaterThan","v2Pairs","v2IsLoading","length","some","V2Pair","allV2PairsWithLiquidity","pair","v2Pair","Boolean","index","width"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react'\nimport { Card, CardHeader, CardBody, Text, Box, Button, Flex, ArrowDownIcon, Link } from 'waltor-uikit'\nimport { Pair } from '@pancakeswap-libs/sdk'\nimport { useTokenBalancesWithLoadingIndicator } from 'state/wallet/hooks'\nimport { toV2LiquidityToken, useTrackedTokenPairs } from 'state/user/hooks'\nimport { StyledInternalLink } from 'components/Shared'\nimport { useActiveWeb3React } from 'hooks'\nimport { usePairs } from 'data/Reserves'\nimport FullPositionCard from 'components/PositionCard'\n\nconst ArrowSeparator = () => (\n  <Flex justifyContent=\"center\" my=\"24px\">\n    <ArrowDownIcon color=\"textSubtle\" width=\"24px\" />\n  </Flex>\n)\n\nconst SecondCard = () => {\n  const { account } = useActiveWeb3React()\n\n  // fetch the user's balances of all tracked V2 LP tokens\n  const trackedTokenPairs = useTrackedTokenPairs()\n  const tokenPairsWithLiquidityTokens = useMemo(\n    () => trackedTokenPairs.map((tokens) => ({ liquidityToken: toV2LiquidityToken(tokens), tokens })),\n    [trackedTokenPairs]\n  )\n  const liquidityTokens = useMemo(() => tokenPairsWithLiquidityTokens.map((tpwlt) => tpwlt.liquidityToken), [\n    tokenPairsWithLiquidityTokens,\n  ])\n  const [v2PairsBalances, fetchingV2PairBalances] = useTokenBalancesWithLoadingIndicator(\n    account ?? undefined,\n    liquidityTokens\n  )\n\n  // fetch the reserves for all V2 pools in which the user has a balance\n  const liquidityTokensWithBalances = useMemo(\n    () =>\n      tokenPairsWithLiquidityTokens.filter(({ liquidityToken }) =>\n        v2PairsBalances[liquidityToken.address]?.greaterThan('0')\n      ),\n    [tokenPairsWithLiquidityTokens, v2PairsBalances]\n  )\n\n  const v2Pairs = usePairs(liquidityTokensWithBalances.map(({ tokens }) => tokens))\n  const v2IsLoading =\n    fetchingV2PairBalances || v2Pairs?.length < liquidityTokensWithBalances.length || v2Pairs?.some((V2Pair) => !V2Pair)\n\n  const allV2PairsWithLiquidity = v2Pairs.map(([, pair]) => pair).filter((v2Pair): v2Pair is Pair => Boolean(v2Pair))\n\n  return (\n    <Card>\n      <CardHeader>\n        <Text bold>Remove Liquidity</Text>\n        <Text small color=\"textSubtle\">\n          Unstake your old LP tokens from the old liquidity pools\n        </Text>\n      </CardHeader>\n      <CardBody>\n        <Text bold>V1 LP Tokens in wallet</Text>\n        <Card>\n          {v2IsLoading ? (\n            <CardBody>Loading</CardBody>\n          ) : (\n            <CardBody>\n              {allV2PairsWithLiquidity?.length > 0 ? (\n                <>\n                  {allV2PairsWithLiquidity.map((v2Pair, index) => (\n                    <Box mb={index < allV2PairsWithLiquidity.length - 1 ? '16px' : 0}>\n                      <FullPositionCard key={v2Pair.liquidityToken.address} pair={v2Pair} />\n                    </Box>\n                  ))}\n                </>\n              ) : (\n                <Text color=\"textDisabled\" textAlign=\"center\">\n                  No liquidity found.\n                </Text>\n              )}\n              <Text mt=\"16px\" textAlign=\"center\">\n                Don&apos;t see a pool you joined?{' '}\n                <StyledInternalLink id=\"import-pool-link\" to=\"/find\">\n                  Import it\n                </StyledInternalLink>\n              </Text>\n            </CardBody>\n          )}\n        </Card>\n        <ArrowSeparator />\n        <Text bold>Discontinued V2 LP</Text>\n        <Card>\n          <CardBody>\n            <Text textAlign=\"center\" mb=\"16px\">\n              If you added liquidity to V2 LPs during the migration attempt on April 23, you need to unstake and remove\n              liquidity.\n            </Text>\n            <Button as={Link} external href=\"https://hiccup.pancakeswap.finance/#/pool\" style={{ width: '100%' }}>\n              Remove\n            </Button>\n          </CardBody>\n        </Card>\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default SecondCard\n"]},"metadata":{},"sourceType":"module"}