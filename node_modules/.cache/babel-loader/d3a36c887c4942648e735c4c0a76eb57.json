{"ast":null,"code":"import React,{useMemo}from'react';import{CheckmarkCircleIcon,ErrorIcon,Flex,LinkExternal,Text,Modal,Button}from'waltor-uikit';import{useActiveWeb3React}from'hooks';import{getBscScanLink}from'utils';import{isTransactionRecent,useAllTransactions}from'state/transactions/hooks';import Loader from'components/Loader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";// TODO: Fix UI Kit typings\nvar defaultOnDismiss=function defaultOnDismiss(){return null;};var newTransactionsFirst=function newTransactionsFirst(a,b){return b.addedTime-a.addedTime;};var getRowStatus=function getRowStatus(sortedRecentTransaction){var hash=sortedRecentTransaction.hash,receipt=sortedRecentTransaction.receipt;if(!hash){return{icon:/*#__PURE__*/_jsx(Loader,{}),color:'text'};}if(hash&&(receipt===null||receipt===void 0?void 0:receipt.status)===1){return{icon:/*#__PURE__*/_jsx(CheckmarkCircleIcon,{color:\"success\"}),color:'success'};}return{icon:/*#__PURE__*/_jsx(ErrorIcon,{color:\"failure\"}),color:'failure'};};var RecentTransactionsModal=function RecentTransactionsModal(_ref){var _ref$onDismiss=_ref.onDismiss,onDismiss=_ref$onDismiss===void 0?defaultOnDismiss:_ref$onDismiss,translateString=_ref.translateString;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId;var allTransactions=useAllTransactions();// Logic taken from Web3Status/index.tsx line 175\nvar sortedRecentTransactions=useMemo(function(){var txs=Object.values(allTransactions);return txs.filter(isTransactionRecent).sort(newTransactionsFirst);},[allTransactions]);return/*#__PURE__*/_jsxs(Modal,{title:translateString(1202,'Recent transactions'),onDismiss:onDismiss,children:[!account&&/*#__PURE__*/_jsxs(Flex,{justifyContent:\"center\",flexDirection:\"column\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Text,{mb:\"8px\",bold:true,children:\"Please connect your wallet to view your recent transactions\"}),/*#__PURE__*/_jsx(Button,{variant:\"tertiary\",scale:\"sm\",onClick:onDismiss,children:\"Close\"})]}),account&&chainId&&sortedRecentTransactions.length===0&&/*#__PURE__*/_jsxs(Flex,{justifyContent:\"center\",flexDirection:\"column\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Text,{mb:\"8px\",bold:true,children:\"No recent transactions\"}),/*#__PURE__*/_jsx(Button,{variant:\"tertiary\",scale:\"sm\",onClick:onDismiss,children:\"Close\"})]}),account&&chainId&&sortedRecentTransactions.map(function(sortedRecentTransaction){var hash=sortedRecentTransaction.hash,summary=sortedRecentTransaction.summary;var _getRowStatus=getRowStatus(sortedRecentTransaction),icon=_getRowStatus.icon,color=_getRowStatus.color;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"space-between\",mb:\"4px\",children:[/*#__PURE__*/_jsx(LinkExternal,{href:getBscScanLink(chainId,hash,'transaction'),color:color,children:summary!==null&&summary!==void 0?summary:hash}),icon]},hash)});})]});};export default RecentTransactionsModal;","map":{"version":3,"sources":["/home/bilal/Downloads/final1/final/src/components/PageHeader/RecentTransactionsModal.tsx"],"names":["React","useMemo","CheckmarkCircleIcon","ErrorIcon","Flex","LinkExternal","Text","Modal","Button","useActiveWeb3React","getBscScanLink","isTransactionRecent","useAllTransactions","Loader","defaultOnDismiss","newTransactionsFirst","a","b","addedTime","getRowStatus","sortedRecentTransaction","hash","receipt","icon","color","status","RecentTransactionsModal","onDismiss","translateString","account","chainId","allTransactions","sortedRecentTransactions","txs","Object","values","filter","sort","length","map","summary"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react'\nimport { CheckmarkCircleIcon, ErrorIcon, Flex, LinkExternal, Text, Modal, Button } from 'waltor-uikit'\nimport { useActiveWeb3React } from 'hooks'\nimport { getBscScanLink } from 'utils'\nimport { isTransactionRecent, useAllTransactions } from 'state/transactions/hooks'\nimport { TransactionDetails } from 'state/transactions/reducer'\nimport Loader from 'components/Loader'\n\ntype RecentTransactionsModalProps = {\n  onDismiss?: () => void\n  translateString: (translationId: number, fallback: string) => string\n}\n\n// TODO: Fix UI Kit typings\nconst defaultOnDismiss = () => null\n\nconst newTransactionsFirst = (a: TransactionDetails, b: TransactionDetails) => b.addedTime - a.addedTime\n\nconst getRowStatus = (sortedRecentTransaction: TransactionDetails) => {\n  const { hash, receipt } = sortedRecentTransaction\n\n  if (!hash) {\n    return { icon: <Loader />, color: 'text' }\n  }\n\n  if (hash && receipt?.status === 1) {\n    return { icon: <CheckmarkCircleIcon color=\"success\" />, color: 'success' }\n  }\n\n  return { icon: <ErrorIcon color=\"failure\" />, color: 'failure' }\n}\n\nconst RecentTransactionsModal = ({ onDismiss = defaultOnDismiss, translateString }: RecentTransactionsModalProps) => {\n  const { account, chainId } = useActiveWeb3React()\n  const allTransactions = useAllTransactions()\n\n  // Logic taken from Web3Status/index.tsx line 175\n  const sortedRecentTransactions = useMemo(() => {\n    const txs = Object.values(allTransactions)\n    return txs.filter(isTransactionRecent).sort(newTransactionsFirst)\n  }, [allTransactions])\n\n  return (\n    <Modal title={translateString(1202, 'Recent transactions')} onDismiss={onDismiss}>\n      {!account && (\n        <Flex justifyContent=\"center\" flexDirection=\"column\" alignItems=\"center\">\n          <Text mb=\"8px\" bold>\n            Please connect your wallet to view your recent transactions\n          </Text>\n          <Button variant=\"tertiary\" scale=\"sm\" onClick={onDismiss}>\n            Close\n          </Button>\n        </Flex>\n      )}\n      {account && chainId && sortedRecentTransactions.length === 0 && (\n        <Flex justifyContent=\"center\" flexDirection=\"column\" alignItems=\"center\">\n          <Text mb=\"8px\" bold>\n            No recent transactions\n          </Text>\n          <Button variant=\"tertiary\" scale=\"sm\" onClick={onDismiss}>\n            Close\n          </Button>\n        </Flex>\n      )}\n      {account &&\n        chainId &&\n        sortedRecentTransactions.map((sortedRecentTransaction) => {\n          const { hash, summary } = sortedRecentTransaction\n          const { icon, color } = getRowStatus(sortedRecentTransaction)\n\n          return (\n            <>\n              <Flex key={hash} alignItems=\"center\" justifyContent=\"space-between\" mb=\"4px\">\n                <LinkExternal href={getBscScanLink(chainId, hash, 'transaction')} color={color}>\n                  {summary ?? hash}\n                </LinkExternal>\n                {icon}\n              </Flex>\n            </>\n          )\n        })}\n    </Modal>\n  )\n}\n\nexport default RecentTransactionsModal\n"]},"metadata":{},"sourceType":"module"}